{"/capture-https-request-with-mobile-device/":{"data":{"":"","#":"æœ€è¿‘åœ¨ä¸ºå…¬å¸é‡æ„é¡¹ç›®ï¼Œå› ä¸ºåŸæœ¬æ˜¯åŸç”Ÿå®‰å“å’Œiosåº”ç”¨ï¼Œæ‰€ä»¥ä¸ºäº†å¿«é€Ÿäº†è§£ä¸šåŠ¡é€»è¾‘å’Œç¼–å†™æ–°ä»£ç ï¼Œæˆ‘å†³å®šä¸€è¾¹ç”¨æ‰‹æœºæ“ä½œä¸šåŠ¡è¿›è¡ŒæŠ“åŒ…ï¼Œä¸€è¾¹å¯¹ç…§å·²æœ‰æ–‡æ¡£ã€ä»£ç è¿›è¡Œé‡æ„ã€‚è¿™ç¯‡æ–‡ç« ä»‹ç»äº†æˆ‘æ˜¯å¦‚ä½•ç”¨ä¸€å°ç”µè„‘å’Œæ‰‹æœºæ¥å®ç°æŠ“åŒ…ç§»åŠ¨è®¾å¤‡ç½‘ç»œè¯·æ±‚çš„ã€‚\né¦–å…ˆä»‹ç»ä¸€ä¸‹ä½¿ç”¨çš„å·¥å…· â€”â€” Charlesï¼Œè¿™æ˜¯ä¸€æ¬¾ç½‘ç»œæŠ“åŒ…å·¥å…·ï¼Œå®ƒå…è®¸å¼€å‘è€…æŸ¥çœ‹ã€ç›‘æ§å‘é€å’Œæ¥æ”¶çš„HTTP/HTTPSé€šä¿¡æ•°æ®ï¼Œä¸»è¦é¢å‘å¼€å‘è€…å¯¹ Webåº”ç”¨ã€ç§»åŠ¨ App ç­‰è¿›è¡Œç½‘ç»œè°ƒè¯•å’Œåˆ†æã€‚ä½ å¯ä»¥ç‚¹å‡»è¿›å…¥ Charles å®˜ç½‘ä¸‹è½½ï¼Œæ”¯æŒ Windowsã€macOS å’Œ Linuxã€‚\nåŸºæœ¬ä½¿ç”¨ å®‰è£…å¥½ Charles åï¼Œå¯ä»¥æŒ‰ç…§æˆ‘ä¸‹é¢ç»™å‡ºçš„æ­¥éª¤è¿›è¡Œä½¿ç”¨ï¼š\n1. è®©ä½ çš„æ‰‹æœºå’Œç”µè„‘å¤„åœ¨åŒä¸€å±€åŸŸç½‘ 2. ç”µè„‘è¿è¡Œ Charlesï¼ˆé»˜è®¤ç«¯å£å· 8888ï¼‰ 3. æ‰“å¼€æ‰‹æœºçš„ WLAN è®¾ç½® ä¿®æ”¹ä»¥ä¸‹ä¸‰é¡¹ï¼Œå¯å‚è€ƒä¸‹æ–¹å°ç±³æ‰‹æœºæˆªå›¾ï¼š\nä»£ç†ï¼šæ”¹ä¸ºæ‰‹åŠ¨\nä¸»æœºåï¼šå¡«å†™ä½ çš„ç”µè„‘ IP\nç«¯å£å·ï¼š 8888ï¼ˆ8888 ä¸º Charles é»˜è®¤ç«¯å£å·ï¼Œå¦‚æœ‰éœ€è¦å¯ä»¥åœ¨ Charles ä¸­çš„ Proxy Settings ä¿®æ”¹ï¼‰\n4. åœ¨æ‰‹æœºä¸­æ‰“å¼€éœ€è¦æŠ“å–çš„ App ç°åœ¨ä½ å¯ä»¥çœ‹åˆ° Charles å·²ç»å¼€å§‹æ­£å¸¸è¿è¡Œï¼Œå¼€å§‹æŠ“å– HTTP è¯·æ±‚äº†ã€‚\nè™½ç„¶ HTTP è¯·æ±‚æŠ“å–æ­£å¸¸ï¼Œä½†ä½ ä¹Ÿè®¸ä¼šå’Œæˆ‘ä¸€æ ·ï¼Œæœ‰éœ€è¦æŠ“å– HTTPS è¯·æ±‚çš„ä½¿ç”¨åœºæ™¯ï¼Œä½†æ­¤æ—¶ Charles æŠ“åŒ…ä¼šå‡ºç°ä¹±ç ï¼Œè¿™æ˜¯ç”±äº HTTPS æ›´é«˜çš„å®‰å…¨æ€§ï¼Œæˆ‘ä»¬è¦æä¾›è¯ä¹¦æ‰å¯ä»¥æ­£å¸¸è·å–æ•°æ®ã€‚\né…ç½®ä»¥æŠ“åŒ… HTTPS Request åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šå®‰è£…è¯ä¹¦ï¼š\n1. é…ç½® Charles çš„ SSL Proxy -\u003e SSL Proxying Settings\næ·»åŠ  *:443ã€‚\n2. ä» Charles ä¸‹è½½è¯ä¹¦ æ‰“å¼€ Charlesï¼ŒHelp -\u003e SSL Proxyingï¼Œå› ä¸ºæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯æ‰‹æœºï¼Œæ‰€ä»¥è¿™é‡Œå°±é€‰æ‹© Mobile Deviceã€‚\nCharles ä¼šå¼¹å‡ºæç¤ºï¼Œæˆ‘ä»¬æ ¹æ®æç¤ºï¼Œç”¨æ‰‹æœºè®¿é—® chls.pro/ssl ä¸‹è½½è¯ä¹¦ã€‚\n3. æ‰‹æœºå®‰è£…è¯ä¹¦ è¿˜æ˜¯ä»¥å°ç±³æ‰‹æœºä¸ºä¾‹ï¼Œç³»ç»Ÿæ˜¯ MUI 13.0.7ï¼Œå®‰è£…è¯ä¹¦æ­¥éª¤å¦‚ä¸‹ï¼š\nå®‰å…¨ -\u003e æ›´å¤šå®‰å…¨è®¾ç½® -\u003e åŠ å¯†ä¸å‡­æ® -\u003e å®‰è£…è¯ä¹¦ -\u003e CA è¯ä¹¦ï¼Œç„¶åé€‰æ‹©åˆšæ‰ä¸‹è½½å¥½çš„ Charles è¯ä¹¦å®‰è£…\nç°åœ¨å†æ‰“å¼€ Charlesï¼Œå¯ä»¥çœ‹åˆ°æŠ“åˆ°çš„ HTTPS è¯·æ±‚ä¿¡æ¯äº†ã€‚"},"title":"ä½¿ç”¨ Charles æŠ“å–ç§»åŠ¨è®¾å¤‡ HTTPS è¯·æ±‚"},"/css-masonry/":{"data":{"":"","#":"å›´ç»• Masonry å±•å¼€çš„è¾©è®º å‰æ®µæ—¶é—´ï¼ŒWebKit å›¢é˜Ÿå‘è¡¨äº†ä¸€ç¯‡åä¸º Help us invent CSS Grid Level 3, aka â€œMasonryâ€ layout çš„æ–‡ç« ï¼Œè®¨è®ºäº†å…³äº Masonry layout çš„ææ¡ˆã€‚\nMasonry åœ¨è‹±æ–‡ä¸­çš„æ„æ€æ˜¯å»ºç­‘ç‰©çš„ç –çŸ³éƒ¨åˆ†ï¼ˆå¦‚ä¸‹å›¾ï¼‰ã€‚\nmasonry å¸ƒå±€æ˜¯ä¸€ç§ç±»ä¼¼ç –å¢™æˆ–çŸ³å¢™çš„æ¨¡å¼çš„å¸ƒå±€ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„ç€‘å¸ƒæµå¸ƒå±€ï¼Œè¿™ç§å¸ƒå±€æ ·å¼å¾ˆå¸¸è§ï¼Œæ¯”å¦‚ Pinterest ã€å°çº¢ä¹¦ç­‰éƒ½é‡‡ç”¨äº†è¿™ç§æ ·å¼ã€‚\nMasonry æ˜¯æœ€å¼€å§‹ä¹Ÿæ˜¯ç”± WebKit å›¢é˜Ÿæå‡ºçš„ï¼Œä½ å¯ä»¥åœ¨ MDN ä¸ŠæŸ¥çœ‹åˆ°å®ƒçš„ä½¿ç”¨æ–¹æ³•ï¼ˆç°åœ¨åªæœ‰ Safari å’Œ Firefox æµè§ˆå™¨æ”¯æŒï¼‰ã€‚è€Œåœ¨ WebKit å‘è¡¨çš„è¿™ç¯‡æ–‡ç« ä¸­ï¼Œä»–ä»¬è§£é‡Šäº†ä¸ºä»€ä¹ˆä»–ä»¬è®¤ä¸º Masonry åº”è¯¥æˆä¸º CSS Grid çš„ä¸€éƒ¨åˆ†ï¼Œå¹¶ä¸”è§£é‡Šäº†å¦‚æœ CSS Working Group ä½¿ç”¨æ›¿æ¢æ–¹æ¡ˆ display: masonry çš„å¯è¡Œæ€§ï¼Œå¹¶ä¸”å‘å¼€å‘è€…ã€è®¾è®¡å¸ˆå¯»æ±‚å»ºè®®ã€‚\nChrome å›¢é˜Ÿä¹Ÿåœ¨å‰å‡ æ—¥ç«™å‡ºæ¥ï¼Œå‘è¡¨äº†ä¸€ç¯‡åä¸º An alternative proposal for CSS masonry çš„æ–‡ç« ï¼Œå…³äº CSS Masonryï¼Œä»–ä»¬æ˜ç¡®çš„æå‡ºäº† â€œimplementing it as a part of the CSS Grid specification [..] would be a mistake\"ï¼ˆå°†å…¶ä½œä¸º CSS Grid è§„èŒƒçš„ä¸€éƒ¨åˆ†æ˜¯ä¸ªé”™è¯¯ï¼‰çš„è§‚ç‚¹ã€‚\nMasonry æ€ä¹ˆç”¨ è™½ç„¶ç€‘å¸ƒæµå¾ˆå¸¸è§ï¼Œä½†æ˜¯ä½œä¸ºä¸€åå‰ç«¯å·¥ç¨‹å¸ˆï¼Œæˆ‘è¿˜ä»æœªå†™è¿‡è¿™ç§æ ·å¼ï¼Œè¶çƒ­æ‰“é“ï¼Œå°±ç”¨è¿™ä¸ªæ–°å¸ƒå±€æ¥å†™ä¸€ä¸ªç€‘å¸ƒæµé¡µé¢ã€‚\né¦–å…ˆæˆ‘ä»¬å»ºä¸€ä¸ª html æ–‡ä»¶ï¼Œæ·»åŠ ä¸€äº›å›¾ç‰‡åšç€‘å¸ƒæµä½¿ç”¨ã€‚\n\u003cdiv class=\"gallery-container\"\u003e \u003cfigure\u003e \u003cimg src=\"https://picsum.photos/seed/1715619706392/500/500\"\u003e \u003c/figure\u003e \u003cfigure\u003e \u003cimg src=\"https://picsum.photos/seed/1715619668573/500/1000\"\u003e \u003c/figure\u003e \u003cfigure\u003e \u003cimg src=\"https://picsum.photos/seed/1715619707240/500/500\"\u003e \u003c/figure\u003e \u003cfigure\u003e \u003cimg src=\"https://picsum.photos/seed/1715619669966/500/1000\"\u003e \u003c/figure\u003e \u003cfigure\u003e \u003cimg src=\"https://picsum.photos/seed/1715619687217/500/800\"\u003e \u003c/figure\u003e \u003cfigure\u003e \u003cimg src=\"https://picsum.photos/seed/1715619713060/500/500\"\u003e \u003c/figure\u003e \u003c/div\u003e ç„¶åå†™å…¥ CSSï¼Œé€šè¿‡ grid-template-rows: masonry æ¥å®ç°ç€‘å¸ƒæµå¸ƒå±€ã€‚\nimg { width: 500px; object-fit: contain; border-radius: 15px; } .gallery-container { display: grid; grid-template-columns: repeat(3, 1fr); grid-gap: 1rem; grid-template-rows: masonry; } æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œè™½ç„¶ grid å¸ƒå±€ç”Ÿæ•ˆäº†ï¼Œä½† grid-template-rows: masonry å¹¶æœªç”Ÿæ•ˆï¼Œå›¾ä¸å›¾ä¹‹é—´å­˜åœ¨å¤§ç‰‡çš„ç©ºç™½ã€‚\nè¿™æ˜¯å› ä¸º Masonry ç›®å‰åªæ˜¯ä¸ªå®éªŒæ€§åŠŸèƒ½ï¼Œå¤§éƒ¨åˆ†æµè§ˆå™¨è¿˜ä¸æ”¯æŒï¼Œä½ å¯ä»¥ä¸‹è½½ Safari Technology Preview æˆ–è€… Firefox Nightly æ¥ä½“éªŒè¿™ä¸ªæ–°ç‰¹æ€§ã€‚\næˆ‘ä½¿ç”¨çš„æ˜¯ safari tpï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä¸€ä¸ªç®€å•çš„ç€‘å¸ƒæµå°±å®ç°äº†ã€‚\nå¾—ç›Šäº masonryï¼Œæ•´ä¸ªå®ç°è¿‡ç¨‹éå¸¸ç®€å•ã€‚é™„ä¸Šå®Œæ•´ä»£ç ï¼šwaterfall-demo\næˆ‘çš„è§‚ç‚¹ é¦–æ¬¡ä½¿ç”¨è¿™ä¸ªæ–°åŠŸèƒ½çš„æ—¶å€™ï¼Œæœ‰äº›åœ°æ–¹æ˜¯å¾ˆè¿·æƒ‘çš„ã€‚\né¦–å…ˆï¼Œä½œä¸ºä¸€ä¸ª non-native English speakerï¼Œmasonry è¿™ä¸ªè¯å¯¹æˆ‘æ¥è¯´éå¸¸é™Œç”Ÿï¼Œå¹¶ä¸åƒ CSS ä¸­å¸¸è§çš„ borderã€centerã€none è®©äººä¸€ç›®äº†ç„¶ï¼Œæ˜¯æœ‰è¯­è¨€é—¨æ§›çš„ã€‚\nå…¶æ¬¡ï¼Œå¯¹äº grid-template-columns/grid-template-rows æ­é… masonry ä½¿ç”¨ï¼Œä¸æˆ‘çš„æ€ç»´ä¹ æƒ¯ç›¸æ‚–ï¼Œç®€å•æ¥è¯´å°±æ˜¯ï¼Œè¦æƒ³å®ç°çºµå‘çš„ç€‘å¸ƒæµï¼Œéœ€è¦ä½¿ç”¨ grid-template-rows: masonryï¼Œè€Œæˆ‘æ½œæ„è¯†è®¤ä¸ºæ˜¯ grid-template-columnsã€‚è¿™é‡Œæœ‰ç‚¹åƒä¸€ä¸ªä¹ æƒ¯ä½¿ç”¨ windows çš„äººï¼Œç¬¬ä¸€æ¬¡ç”¨ macos æµè§ˆç½‘é¡µå¯¹äºä¸Šä¸‹æ»šåŠ¨çš„æ— æ‰€é€‚ä»ã€‚\næ€»ç»“ä¸€ä¸‹ï¼Œæˆ‘å¯¹ Masonry çš„å»ºè®®æœ‰ä¸¤ç‚¹ï¼š\nå°† masonry è¿™ä¸ªå•è¯æ¢æˆæ›´å®¹æ˜“ç†è§£çš„ waterfall å’Œ chrome å›¢é˜Ÿçš„è§‚ç‚¹ä¸€æ ·ï¼ŒMasonry ä¸åº”è¯¥æ˜¯ Grid çš„ä¸€éƒ¨åˆ†ï¼Œåº”è¯¥å•ç‹¬çš„ä½¿ç”¨ â€”â€” display: masonryã€‚ "},"title":"CSS Masonry"},"/docker-proxy-configuration/":{"data":{"":"Docker Desktop ç™»å½•å¤±è´¥æœ‰å¾ˆå¤šåŸå› ï¼Œå¦‚æœä½¿ç”¨ç½‘é¡µæ‰“å¼€ Docker Hub ç™»å½•æ²¡é—®é¢˜ï¼Œä½†æ˜¯ Docker Desktop ç™»å½•è¶…æ—¶ï¼Œå¤§æ¦‚ç‡æ˜¯å› ä¸ºä»£ç†é—®é¢˜ï¼Œå¯ä»¥å‚è€ƒä¸‹é¢çš„æ–¹æ³•è¿›è¡Œé…ç½®ã€‚","ç™»å½•é—®é¢˜#ç™»å½•é—®é¢˜":"é¦–å…ˆä½ è¦æœ‰ä¸€ä¸ªä»£ç†ï¼ˆè‡ªè¡Œ Googleï¼‰ï¼Œè·å–åˆ°ä»£ç†çš„ç«¯å£å·ã€‚ä¾‹å¦‚æˆ‘ä½¿ç”¨çš„æ˜¯ Clashï¼Œåœ¨è®¾ç½®ä¸­å¯ä»¥çœ‹åˆ°ç«¯å£å·ä¸º 7897ã€‚\næ‰“å¼€ Docker Desktop è®¾ç½®ï¼ŒResource -\u003e Proxiesã€‚\næ‰“å¼€ Manual Proxy configuration çŠ¶æ€ï¼Œæ·»åŠ  Web Server(HTTP) å’Œ Web Server(HTTPS)ï¼Œç«¯å£å·ä¸ºä»£ç†ç«¯å£å·ã€‚\né‡å¯ Docker Desktop å°±å¯ä»¥æ­£å¸¸ç™»å½•äº†ã€‚","é•œåƒåŠ é€Ÿ#é•œåƒåŠ é€Ÿ":"å›½å†…ä» Docker Hub æ‹‰å»é•œåƒæœ‰æ—¶ä¼šé‡åˆ°å›°éš¾ï¼Œå¯ä»¥å‚è€ƒå›½å†…çš„ Docker Hub é•œåƒåŠ é€Ÿå™¨é…ç½®é•œåƒåŠ é€Ÿã€‚"},"title":"Docker ä»£ç†é…ç½®ï¼ˆè§£å†³ç™»å½•å¤±è´¥é—®é¢˜ï¼‰"},"/how-to-manage-files-on-cloud-storage-with-rclone/":{"data":{"":"åœ¨ç°ä»£æ•°æ®ç®¡ç†ä¸­ï¼Œäº‘å­˜å‚¨å·²ç»æˆä¸ºä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ã€‚æ— è®ºæ˜¯ä¸ªäººç”¨æˆ·è¿˜æ˜¯ä¼ä¸šç”¨æˆ·ï¼Œäº‘å­˜å‚¨éƒ½æä¾›äº†ä¾¿æ·çš„å­˜å‚¨å’Œè®¿é—®æ–¹å¼ã€‚æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨ Rclone è¿™ä¸ªå¼ºå¤§çš„å‘½ä»¤è¡Œå·¥å…·æ¥ç®¡ç†é˜¿é‡Œäº‘ OSS(å¯¹è±¡å­˜å‚¨æœåŠ¡) æ–‡ä»¶ã€‚","ä»€ä¹ˆæ˜¯-rclone#ä»€ä¹ˆæ˜¯ Rcloneï¼Ÿ":"Rclone æ˜¯ä¸€ä¸ªå¼€æºå‘½ä»¤è¡Œç¨‹åºï¼Œæ”¯æŒå¤šç§äº‘å­˜å‚¨æœåŠ¡ï¼ŒåŒ…æ‹¬ Google Driveã€Amazon S3(é˜¿é‡Œäº‘OSSã€è…¾è®¯COSã€åä¸ºOBSç­‰)ã€Dropboxã€‚ä»–å¯ä»¥ç”¨äºåŒæ­¥æ–‡ä»¶ã€å¤‡ä»½æ•°æ®ã€è¿ç§»å­˜å‚¨ï¼Œä»¥åŠå…¶ä»–æ–‡ä»¶ç®¡ç†ä»»åŠ¡ã€‚Rclone æä¾›äº†ä¸°å¯Œçš„åŠŸèƒ½ï¼Œå¦‚åŠ å¯†ã€å‹ç¼©ã€å¤šçº¿ç¨‹ä¸‹è½½ç­‰ï¼Œéå¸¸é€‚åˆé«˜æ•ˆç®¡ç†äº‘å­˜å‚¨æ–‡ä»¶ã€‚\nå®ƒæ”¯æŒä»¥ä¸‹åŠŸèƒ½ï¼š\næŒ‰éœ€å¤åˆ¶ï¼Œæ¯æ¬¡ä»…ä»…å¤åˆ¶æ›´æ”¹çš„æ–‡ä»¶ æ–­ç”µç»­ä¼  å‹ç¼©ä¼ è¾“ ","å®‰è£…-rclone#å®‰è£… Rclone":"é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å®‰è£… Rcloneã€‚å¯ä»¥ä» Rclone å®˜ç½‘ ä¸‹è½½é€‚åˆä½ æ“ä½œç³»ç»Ÿçš„å®‰è£…åŒ…ï¼Œå¹¶æŒ‰ç…§å“åº”çš„å®‰è£…æ­¥éª¤è¿›è¡Œå®‰è£…ã€‚\nå¯¹äº macOS ç”¨æˆ·ï¼Œå¯ä»¥é€šè¿‡ brew è¿›è¡Œå®‰è£…ï¼š\nbrew install rclone å¦‚æœä½ æ˜¯ Windows ç”¨æˆ·ï¼Œå¯ä»¥ä¸‹è½½ .exe æ–‡ä»¶å¹¶è¿è¡Œå®‰è£…ç¨‹åºã€‚","å¸¸ç”¨æ“ä½œç¤ºä¾‹#å¸¸ç”¨æ“ä½œç¤ºä¾‹":"åˆ—å‡ºå­˜å‚¨æ¡¶(bucket)ä¸­çš„æ–‡ä»¶ rclone ls alioss:your-bucket-name ä¸Šä¼ æ–‡ä»¶åˆ°bucket rclone copy /path/to/local/file alioss:your-bucket-name ä¸‹è½½æ–‡ä»¶åˆ°æœ¬åœ° rclone copy alioss:your-bucket-name /path/to/local/dir åŒæ­¥æœ¬åœ°ç›®å½•å’Œå­˜å‚¨æ¡¶ rclone sync /path/to/local/dir alioss:your-bucket-name ","æ€»ç»“#æ€»ç»“":"Rclone æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„å·¥å…·ï¼Œèƒ½å¤Ÿå¸®åŠ©ä½ é«˜æ•ˆåœ°ç®¡ç†é˜¿é‡Œäº‘ OSS æˆ–æ˜¯å…¶ä»–äº‘æœåŠ¡çš„æ–‡ä»¶ï¼Œé€šè¿‡ç®€å•çš„é…ç½®å’Œå‘½ä»¤è¡Œæ“ä½œï¼Œä½ å¯ä»¥è½»æ¾å®ç°æ–‡ä»¶çš„ä¸Šä¼ \nã€ä¸‹è½½å’ŒåŒæ­¥ç­‰ä»»åŠ¡ã€‚å¸Œæœ›æœ¬æ–‡èƒ½å¤Ÿå¸®åŠ©ä½ å¿«é€Ÿä¸Šæ‰‹ Rcloneï¼Œå¹¶å……åˆ†åˆ©ç”¨å…¶å¼ºå¤§çš„åŠŸèƒ½æ¥ç®¡ç†ä½ çš„äº‘å­˜å‚¨æ–‡ä»¶ã€‚","é…ç½®-rclone-è¿æ¥é˜¿é‡Œäº‘-oss#é…ç½® Rclone è¿æ¥é˜¿é‡Œäº‘ OSS":"å®‰è£…å®Œæˆåï¼Œæˆ‘ä»¬éœ€è¦é…ç½® Rclone ä»¥é“¾æ¥é˜¿é‡Œäº‘ OSSã€‚æ‰“å¼€ç»ˆç«¯(Terminal)ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤å¯åŠ¨é…ç½®å‘å¯¼ï¼š\nrclone config æ¥ä¸‹æ¥ï¼Œä½ ä¼šçœ‹åˆ°ä¸€ä¸ªäº¤äº’å¼çš„é…ç½®ç•Œé¢ï¼š\nNo remotes found - make a new one n) New remote s) Set configuration password q) Quit config n/s/q\u003e è¾“å…¥ n å¹¶æŒ‰å›è½¦ï¼Œå¼€å§‹åˆ›å»ºä¸€ä¸ªæ–°çš„ remoteã€‚ç„¶åæŒ‰ç…§æç¤ºè¾“å…¥ä»¥ä¸‹ä¿¡æ¯ï¼š\nremote åç§°ï¼šä¾‹å¦‚alioss å­˜å‚¨ç±»å‹ï¼šè¾“å…¥ 4ï¼Œå³ Amazon S3 Compliant Storage Providers æœåŠ¡æä¾›å•†ï¼šè¾“å…¥ 2ï¼Œå³ Alibaba Cloud Object Storage System (OSS) formerly Aliyun Access Key ID å’Œ ACCESS Key Secretï¼šä»é˜¿é‡Œäº‘ OSS æ§åˆ¶å°è·å– Endpointï¼šé€‰æ‹©ä½ çš„ OSS ç»ˆç«¯èŠ‚ç‚¹ï¼Œä¾‹å¦‚ oss-cn-shenzhen.aliyuncs.com å…¶ä»–é€‰é¡¹ï¼šæ ¹æ®éœ€è¦é…ç½®ï¼Œé€šå¸¸å¯ä»¥ä½¿ç”¨é»˜è®¤å€¼ é…ç½®å®Œæˆåï¼Œä¿å­˜å¹¶é€€å‡ºã€‚"},"title":"å¦‚ä½•ä½¿ç”¨ Rclone é«˜æ•ˆç®¡ç†äº‘å­˜å‚¨æ–‡ä»¶"},"/https-for-local-development/":{"data":{"":"æˆ‘æœ€è¿‘åœ¨å¼€å‘ä¸€ä¸ªèƒ½å¤Ÿæä¾›æ‰«ç åŠŸèƒ½çš„ç½‘é¡µï¼Œä½†æ˜¯æ‰«ç åŠŸèƒ½éœ€è¦è°ƒç”¨ç›¸æœºæƒé™ï¼Œæµè§ˆå™¨å‡ºäºå®‰å…¨è€ƒè™‘åªåœ¨ HTTPS ç¯å¢ƒä¸‹å…è®¸ã€‚æ‰€ä»¥æƒ³è¦åœ¨æœ¬åœ°è°ƒè¯•è¿™äº›åŠŸèƒ½ï¼Œéœ€è¦ä¸ºæœ¬åœ°å¼€å‘æœåŠ¡å™¨é…ç½® HTTPSã€‚è§£å†³è¿™ä¸ªé—®é¢˜çš„æœ¬è´¨å°±æ˜¯ç”Ÿæˆæœ¬åœ°è¯ä¹¦å’Œè‡ªç­¾åï¼Œç½‘ä¸Šèƒ½æ‰¾åˆ°å¾ˆå¤šæ–¹æ³•ï¼Œåœ¨è¿™é‡Œæˆ‘ä¼šä»‹ç»ä¸¤ç§ï¼Œçœ‹åˆ°è¿™ç¯‡åšå®¢çš„æœ‹å‹å¯ä»¥è·Ÿç€ä¸‹é¢çš„æ­¥éª¤å®è·µï¼Œè¶³å¤Ÿä½ åœ¨ç®€å•åŸºç¡€çš„å¼€å‘ä¸­å»ä½¿ç”¨ã€‚","mkcert#mkcert":"mkcert æ˜¯ä¸€ä¸ªç®€åŒ–äº†çš„æœ¬åœ° CA å·¥å…·ï¼Œç”¨æ¥ç”Ÿæˆæœ‰æ•ˆçš„æœ¬åœ° HTTPS è¯ä¹¦ã€‚mkcert çš„ä½¿ç”¨å’Œè¯ä¹¦é…ç½®æ­¥éª¤å¦‚ä¸‹ï¼š\n1.å®‰è£… å¦‚æœä½ ä¹Ÿæ˜¯ macOS ç³»ç»Ÿä¸”å®‰è£…äº† homebrewï¼Œå¯ä»¥æŒ‰ç…§ä¸‹é¢è¿™ä¸ªæ–¹å¼è¿›è¡Œå®‰è£…ï¼š\nbrew instal mkcert brew install nss # å¦‚æœç”µè„‘ä¸­æœ‰ Firefoxï¼Œè¿˜éœ€è¦è¿™ä¸€æ­¥éª¤ï¼Œå¦åˆ™ä¼šæŠ¥é”™ å¦‚æœä½ æ˜¯ Windowsï¼Œå¯ä»¥ç‚¹å‡»æ­¤å¤„æŸ¥çœ‹å®‰è£…æ­¥éª¤ã€‚\n2.å®‰è£…æœ¬åœ° CA mkcert -install 3.ä¸º localhost åˆ›å»ºè¯ä¹¦ mkcert localhost 127.0.0.1 ::1 åˆ›å»ºæˆåŠŸåï¼ŒTerminal ä¼šæ˜¾ç¤ºè¯ä¹¦çš„å­˜æ”¾ä½ç½®å’Œè¿‡æœŸæ—¶é—´ï¼Œå¦‚ä¸‹ï¼š\nThe certificate is at \"./localhost+2.pem\" and the key at \"./localhost+2-key.pem\" âœ… It will expire on 25 March 2026 ğŸ—“ 4.å°†è¯ä¹¦å­˜æ”¾åœ¨é¡¹ç›®ä¸­ åœ¨é¡¹ç›®ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œæ–¹ä¾¿ç®¡ç†è¯ä¹¦ã€‚\nä¾‹å¦‚æˆ‘åœ¨æˆ‘çš„é¡¹ç›®ç›®å½•ä¸‹æ–°å»ºäº†ä¸€ä¸ª cert çš„æ–‡ä»¶å¤¹ï¼Œå¹¶å°†åˆšæ‰ç”Ÿæˆçš„ localhost+2.pem å’Œ localhost+2-key.pem ç§»åŠ¨åˆ°è¯¥ç›®å½•ä¸‹ã€‚\n5.é…ç½® vite ä»¥ä½¿ç”¨ HTTPS æˆ‘çš„é¡¹ç›®æŠ€æœ¯æ ˆæ˜¯ vue3 + viteï¼Œæ‰€ä»¥è¿™é‡Œé…ç½®çš„æ˜¯ vite.config.js æ–‡ä»¶ï¼Œå¦‚æœä½ ä½¿ç”¨å…¶ä»–æ„å»ºå·¥å…·(æ¯”å¦‚vue-cli + webpack)ï¼Œé…ç½®æ–¹æ³•ä¹Ÿéƒ½å¤§åŒå°å¼‚ï¼Œåªéœ€æŸ¥é˜…å®˜æ–¹æ–‡æ¡£åšå‡ºç›¸åº”è°ƒæ•´å³å¯ã€‚ æ³¨æ„ï¼šä¿®æ”¹é…ç½®åè®°å¾—é‡æ–°è¿è¡ŒæœåŠ¡ã€‚\n// vite.config.js import fs from 'fs'; import path from 'path'; export default defineConfig({ // ... server: { // ... https: { key: fs.readFileSync(path.resolve(__dirname, 'cert/localhost+2-key.pem')), cert: fs.readFileSync(path.resolve(__dirname, 'cert/localhost+2.pem')), }, }, }) ","vue--react-è‡ªå¸¦é€‰é¡¹#Vue / React è‡ªå¸¦é€‰é¡¹":"ä¸ç®¡æ˜¯ React è¿˜æ˜¯ Vueï¼Œéƒ½è‡ªå¸¦äº†å¼€å¯ HTTPS çš„é€‰é¡¹ï¼Œè¿™ä¹Ÿä½¿å¾—æˆ‘ä»¬åœ¨æœ¬åœ°ä½¿ç”¨ HTTPS åè®®æ›´åŠ ç®€å•ã€‚\nä¹Ÿä»¥ vite ä¸ºä¾‹ï¼Œå®˜æ–¹æ–‡æ¡£ä¸­æœ‰æåˆ°ï¼Œå¦‚æœéœ€è¦åˆæ³•è¯ä¹¦ï¼Œå¯ä»¥ä½¿ç”¨å®ƒä»¬æä¾›çš„æ’ä»¶ @vitejs/plugin-basic-sslï¼Œè¿™ä¸ªæ’ä»¶ä¼šè‡ªåŠ¨åˆ›å»ºå’Œç¼“å­˜ä¸€ä¸ªè‡ªç­¾åçš„è¯ä¹¦ã€‚\n1.å®‰è£…æ’ä»¶ @vitejs/plugin-basic-sslï¼š pnpm add @vitejs/plugin-basic/ssl -D 2.é…ç½® vite é…ç½® vite åè¿è¡Œå³å¯ï¼Œéœ€è¦æ³¨æ„æµè§ˆå™¨å¯èƒ½ä¼šæœ‰å®‰å…¨è­¦å‘Šï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä»¬ç”Ÿæˆçš„è‡ªç­¾åè¯ä¹¦ä¸æ˜¯å—ä¿¡ä»»çš„è¯ä¹¦é¢å‘æœºæ„ç­¾å‘çš„ï¼Œä½†ä¸å¦¨ç¢æˆ‘ä»¬å¼€å‘ä½¿ç”¨ï¼Œåªè¦ä¸æŠ•å…¥ç”Ÿäº§ç¯å¢ƒä½¿ç”¨å°±æ²¡é—®é¢˜ã€‚\n// vite.config.js export default defineConfig({ // ... plugins: [ // ... basicSsl(), ], server: { // ... https: true, }, }) "},"title":"ä½¿ç”¨ mkcert/Vite ç”Ÿæˆæœ¬åœ°è¯ä¹¦"},"/module-management/":{"data":{"":"","commonjs#\u003ccode\u003eCommonJS\u003c/code\u003e":"","es-modules#\u003ccode\u003eES Modules\u003c/code\u003e":"","esm-å‘ä¸‹å…¼å®¹#\u003ccode\u003eESM\u003c/code\u003e å‘ä¸‹å…¼å®¹":"æ¨¡å—åŒ–åŠå…¶ä¼˜åŠ¿ Node.js ä¸ æµè§ˆå™¨çš„ JavaScript æœ€å¤§ä¸åŒå°±åœ¨äº Node.js æ˜¯æ¨¡å—åŒ–çš„ã€‚\næ¨¡å—åŒ– æ¨¡å—åŒ–æ˜¯ä¸€ç§ç¼–ç¨‹èŒƒå¼ï¼Œå°†å¤§å‹ã€å¤æ‚çš„ç¨‹åºç³»ç»Ÿåˆ†è§£æˆæ›´å°ã€æ›´æ˜“ç®¡ç†å’Œç»´æŠ¤çš„éƒ¨åˆ†ã€‚åœ¨æ¨¡å—åŒ–ä¸­ï¼Œæ¯ä¸ªæ¨¡å—æ‰§è¡Œä¸€é¡¹ç‰¹å®šçš„åŠŸèƒ½ï¼ŒåŒæ—¶å°½å¯èƒ½å‡å°‘ä¸å…¶ä»–æ¨¡å—çš„ç›´æ¥äº¤äº’ã€‚è¿™æ ·çš„æ–¹æ³•æœ‰å¾ˆå¤šä¼˜ç‚¹ï¼š\nå°è£…ã€‚æ¯ä¸ªæ¨¡å—å°†æ•°æ®å’ŒåŠŸèƒ½å°è£…åœ¨æ¨¡å—å†…éƒ¨ï¼Œå¹¶æä¾›æ¥å£ä¸å¤–ç•Œäº¤äº’ã€‚æœ‰åŠ©äºéšè—å†…éƒ¨å®ç°ç»†èŠ‚ï¼Œå‡å°‘æ¨¡å—é—´çš„ç›¸äº’ä¾èµ–ã€‚ é‡ç”¨æ€§ã€‚æ¨¡å—åŒ–å¯ä»¥ä½¿å¼€å‘è€…åœ¨é¡¹ç›®å¤šå¤„é‡å¤ä½¿ç”¨ä»£ç å—ï¼Œä¹Ÿå¯ä»¥åœ¨å¤šä¸ªé¡¹ç›®æˆ–åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ï¼Œå‡å°‘é‡å¤ä»£ç çš„ç¼–å†™ï¼Œæé«˜ä»£ç æ•´ä½“è´¨é‡ã€‚ å¯ç»´æŠ¤æ€§å’Œå¯è¯»æ€§ã€‚æ¨¡å—åŒ–ä»£ç é€šå¸¸æ›´æ˜“äºç†è§£å’Œç»´æŠ¤ï¼Œæ¯ä¸ªæ¨¡å—è´Ÿè´£æ¸…æ™°å®šä¹‰çš„åŠŸèƒ½ï¼Œä½¿å¾—ä»£ç æ›´åŠ ç›´è§‚å’Œæ˜“äºç®¡ç†ã€‚ ç‹¬ç«‹æ€§ã€‚æ¨¡å—ä¹‹é—´çš„æ¾è€¦åˆç¡®ä¿äº†ä¿®æ”¹ä¸€ä¸ªæ¨¡å—ä¸ä¼šæˆ–å¾ˆå°‘å½±å“å…¶ä»–æ¨¡å—ï¼Œæœ‰åŠ©äºæ·»åŠ ã€æ›´æ–°å’Œä¿®å¤åŠŸèƒ½ã€‚ Node.js çš„æ¨¡å—åŒ–é€‰æ‹© åœ¨ Node.js è¯ç”Ÿä¹‹åˆï¼ŒJavaScript è¿˜æ²¡æœ‰æ ‡å‡†çš„æ¨¡å—æœºåˆ¶ï¼Œå› æ­¤ Node.js ä¸€å¼€å§‹é‡‡ç”¨äº† CommonJS(ä¸‹æ–‡ç®€å†™ä¸º CJS)ã€‚éšåï¼ŒJavaScript æ ‡å‡†çš„æ¨¡å—åŒ–æœºåˆ¶ ES Modules(ä¸‹æ–‡ç®€å†™ä¸º ESM) è¯ç”Ÿï¼Œæµè§ˆå™¨å¼€å§‹é€æ­¥æ”¯æŒ ESMã€‚åœ¨ Node.js æ”¯æŒ ESM ä¹‹å‰ï¼Œå°±æœ‰ Babel è¿™æ ·çš„ç¼–è¯‘å·¥å…·å’Œ Webpack è¿™æ ·çš„æ‰“åŒ…å·¥å…·ï¼Œå°†è§„èŒƒçš„ ESM æ¨¡å—æœºåˆ¶ç¼–è¯‘æˆ Node.js çš„ CJS æ¨¡å—æœºåˆ¶äº†ã€‚éšåï¼Œåœ¨Node.js v13.2.0 ä¹Ÿå¼€å§‹å¼•å…¥äº†è§„èŒƒçš„ ESM æœºåˆ¶ï¼ŒåŒæ—¶å…¼å®¹æ—©æœŸ CJSã€‚\næ‰€ä»¥æˆ‘ä»¬ç°åœ¨å†™ Node.js æ¨¡å—çš„æ—¶å€™ï¼Œæœ‰ 3 ç§æ€è·¯ï¼š\nç›´æ¥é‡‡ç”¨ ESMï¼Œåœ¨ Node.js v13.2.0 ä¹‹åçš„ç‰ˆæœ¬å¯è¡Œã€‚ ä½¿ç”¨ ESMï¼Œä½†æ˜¯é€šè¿‡ Babel ç¼–è¯‘æˆ CJSã€‚ ä½¿ç”¨ CJSï¼ŒNode.js åœ¨æœªæ¥å¾ˆé•¿ä¸€æ®µæ—¶é—´è¿˜æ˜¯ä¼šåŒæ—¶å…¼å®¹ ESM å’Œ CJS çš„ã€‚ ES Modules export å¯¼å‡ºï¼Œ import å¯¼å…¥\nå¯¼å‡ºè¯­æ³• exporting declaration å¯¼å‡ºå£°æ˜\nexport let a, b export const a = 1, b = 2 export function functionName () {} export class ClassName {} export const { a, b } = obj export const [ a, b ] = arr ä¾‹å¦‚ï¼š\n// hello.mjs export const name = 'River' // index.mjs import { name } from './hello.mjs' export list å¯¼å‡ºåˆ—è¡¨\nexport { name1, name2 } export { variable1 as name1, variable2 as name2 } export { variable1 as 'string name' } export { name1 as default } ä¾‹å¦‚ï¼š\n// hello.mjs const name = 'River' const sayHello = (text) =\u003e `Hello ${text}!` export { name, sayHello as default } // index.mjs import { name } from './hello.mjs' import sayHello from './hello.mjs' console.log(sayHello(name)) // Hello River! default exports é»˜è®¤å¯¼å‡º\nexport default expression export default function functionName() {} export default class ClassName {} æ­¤å¤–ï¼Œè¿˜æœ‰ export ... from ...çš„èšåˆè¯­æ³•ï¼Œåœ¨æ­¤ä¸åšèµ˜è¿°ï¼Œè¦æƒ³äº†è§£å¯ä»¥çœ‹ MDN-JavaScript-exportã€‚\nå¯¼å…¥è¯­æ³• åŸºäºä¸Šè¿°çš„ export å¯¼å‡ºæ–¹å¼å¯ä»¥çŸ¥é“ï¼Œexport å¯¼å‡ºçš„ API åˆ†ä¸º default å’Œ é defaultã€‚æ€»ç»“ä¸€ä¸‹ï¼Œé’ˆå¯¹è¿™ä¸¤ç§ APIï¼Œimport ä¹Ÿæœ‰ä¸¤ç§ä¸åŒçš„å¯¼å…¥æ–¹å¼ï¼ˆå¯æŸ¥çœ‹ä¸Šè¿°ä¾‹å­ï¼‰ï¼š\nimport { API } from æ¨¡å—è·¯å¾„ // é default API import defaultAPI from æ¨¡å—è·¯å¾„ // default API å½“ç„¶ï¼Œå’Œ export ä¸€æ ·ï¼Œimport ä¹Ÿå¯ä»¥ä½¿ç”¨ as ç»™ API é‡å‘½åã€‚\nimport { variable1 as name1 } from æ¨¡å—è·¯å¾„ import * as foo from æ¨¡å—è·¯å¾„ ä¸Šè¿°çš„ import * as foo å¯ä»¥å°†å¯¼å‡º API ç”Ÿæˆå¯¹è±¡ fooï¼Œå¹¶ä¸” default API ä¸º foo.defaultã€‚\næ–‡ä»¶ååç¼€ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ Node.js ä¸­é»˜è®¤ä½¿ç”¨ CommonJS è§„èŒƒå®šä¹‰ .js æ–‡ä»¶çš„æ¨¡å—ï¼Œç”¨ ES Modules è§„èŒƒå®šä¹‰ .mjs æ–‡ä»¶çš„æ¨¡å—ã€‚å…³äºè¿™ä¸¤è€…çš„å¯ç”¨è§„åˆ™ï¼Œè¯¦ç»†å¯æŸ¥çœ‹ nodejs docï¼Œåœ¨æ­¤ä¸åšèµ˜è¿°ã€‚\nå¦‚æœè¦ä½¿ç”¨ ESM å®šä¹‰ .js æ–‡ä»¶çš„æ¨¡å—ï¼Œå¯ä»¥åœ¨é…ç½®æ–‡ä»¶ package.json ä¸­è®¾ç½® type: moduleã€‚\nCommonJS module.exports å¯¼å‡ºï¼Œrequire å¯¼å…¥\nå¯¼å‡ºè¯­æ³• module.exports module.exports = { name1, name2 } module.exports = { name1: variable1, name2: variable2 } // ä¸åŒäº ES Module çš„ as ç”¨æ³• exports exports.a = 1 exports.b = 2 exports.functionName = () =\u003e a + b ä¾‹å¦‚ï¼š\n// hello.js const name = 'River' const sayHello = (text) =\u003e `Hello ${text}!` module.exports = { name, sayHello } // index.js const { name, sayHello } = require('./hello.js') console.log(sayHello(name)) exports.å±æ€§å æ˜¯æ—©æœŸç”¨æ³•ï¼Œç°åœ¨åº”è¯¥å°½é‡ä½¿ç”¨ module.exports = { å±æ€§å }ã€‚æ³¨æ„ï¼Œä¸¤ç§è¯­æ³•ä¸èƒ½åŒæ—¶ä½¿ç”¨ï¼Œå› ä¸º exports.å±æ€§å ä¼šè¢« module.exports = { å±æ€§å } è¦†ç›–ã€‚\nå¯¼å…¥è¯­æ³• const { API } = require(æ¨¡å—è·¯å¾„) ESM å’Œ CJS çš„å·®å¼‚ åŠ è½½æœºåˆ¶æ˜¯ç†è§£è¿™ä¸¤ä¸ªæ¨¡å—ç³»ç»Ÿæ ¸å¿ƒç‰¹æ€§çš„å…³é”®ï¼Œä¹Ÿæ˜¯å®ƒä»¬æ ¹æœ¬çš„åŒºåˆ«æ‰€åœ¨ã€‚\nCJS åŠ¨æ€åŠ è½½ è¿è¡Œæ—¶åŠ è½½ã€‚æ¨¡å—ä¾èµ–å…³ç³»åœ¨ä»£ç æ‰§è¡Œæ—¶è§£æã€‚è¿™æ„å‘³ç€ require() å‡½æ•°è°ƒç”¨æ˜¯åœ¨ä»£ç æ‰§è¡Œè¿‡ç¨‹ä¸­å¤„ç†çš„ï¼Œå¯ä»¥çµæ´»ä½¿ç”¨æ¨¡ç‰ˆå­—ç¬¦ä¸²åŠ¨æ€æ‹¼æ¥è·¯å¾„ï¼Œä¾‹å¦‚ï¼š const libPath = ENV.supportES6 ? './es6/' : './' const myLib = require(`${libPath}lib.js`) è¿˜å¯ä»¥æ ¹æ®ç¨‹åºçš„è¿è¡Œé€»è¾‘å’Œæ¡ä»¶æ¥åŠ è½½æ¨¡å—ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥åœ¨ if ä¸­è°ƒç”¨ require()ï¼Œæ ¹æ®ä¸åŒçš„æ¡ä»¶åŠ è½½ä¸åŒçš„æ¨¡å—ã€‚ let api; if(condition) { api = require('./foo'); } else { api = require('./bar'); } åŒæ­¥åŠ è½½ã€‚åœ¨ä¸éœ€è¦è€ƒè™‘ç½‘ç»œå»¶è¿Ÿçš„æƒ…å†µä¸‹ï¼Œå°¤å…¶æ˜¯æœåŠ¡å™¨ç«¯ JavaScript(Node.js)ï¼Œæ¨¡å—ä¸€èˆ¬éƒ½æ˜¯ä»æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸­åŠ è½½ï¼Œæ­¤æ—¶åŒæ­¥åŠ è½½æ˜¯å¯è¡Œçš„ã€‚ ESM é™æ€åŠ è½½ ç¼–è¯‘æ—¶åŠ è½½ã€‚æ¨¡å—ä¾èµ–å…³ç³»åœ¨ç¼–è¯‘æ—¶å°±ç¡®å®šã€‚import å’Œ export éƒ½å¿…é¡»æ”¾åœ¨æœ€å¤–å±‚ï¼Œä¸èƒ½è¢«åŒ…å«åœ¨å‡½æ•°æˆ–æ¡ä»¶è¯­å¥å†…ã€‚ å¼‚æ­¥åŠ è½½ã€‚å¼‚æ­¥åŠ è½½å…è®¸ä»£ç åœ¨æ¨¡å—ä¸‹è½½å’Œå¤„ç†æœŸé—´ç»§ç»­æ‰§è¡Œï¼Œè§£å†³äº†é˜»å¡é—®é¢˜ï¼Œå½“ç„¶ä¹Ÿä½¿æ¨¡å—ç®¡ç†æ›´åŠ å¤æ‚ã€‚ ESM å®ç°åŠ¨æ€åŠ è½½ ESM ä¸å…è®¸ import è¯­å¥ç”¨åŠ¨æ€è·¯å¾„ï¼Œä¹Ÿä¸å…è®¸åœ¨è¯­å¥å—ä¸­ä½¿ç”¨ï¼Œä½†å…è®¸é€šè¿‡ä½¿ç”¨ import() å‡½æ•°å®ç°åŠ¨æ€åŠ è½½ï¼Œè€Œä¸”æ˜¯å¼‚æ­¥è¿›è¡Œçš„ã€‚\nåŠ¨æ€çš„ import() è¿”å›ä¸€ä¸ª Promiseï¼Œè¯¥ Promise è§£æä¸ºå¼•å…¥æ¨¡å—çš„æ‰€æœ‰å¯¼å‡ºã€‚éœ€è¦ä½¿ç”¨ .then()ã€async/await ç­‰æ–¹å¼æ¥å¤„ç†å¯¼å…¥çš„æ¨¡å—ã€‚ä¾‹å¦‚ï¼š\n(async function() { const { functionName } = await import('./myModules.mjs) functionName() }()) ä½¿ç”¨åœºæ™¯ï¼š\næ¡ä»¶åŠ è½½ ä¾‹å¦‚ï¼š if(someCondition) { import('./myModules.mjs') .then(module =\u003e { module.functionName() }) } æ€§èƒ½ä¼˜åŒ–ã€‚æ¯”å¦‚åœ¨å¤„ç†å¤§å‹æ¨¡å—æ—¶ï¼Œé€šè¿‡ä»£ç åˆ†å‰²å’Œæ‡’åŠ è½½ï¼Œå‡å°‘åº”ç”¨çš„åˆå§‹è´Ÿè½½æ—¶é—´ï¼Œæå‡æ€§èƒ½ã€‚ ESM å‘ä¸‹å…¼å®¹ åœ¨ Node.js ç¯å¢ƒä¸­ï¼ŒES Modules ä¼šå‘ä¸‹å…¼å®¹ CommonJSï¼Œå¯¹äº CJS å¯¼å‡ºçš„ APIï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ import() å¼•å…¥ï¼Œå¹¶ä¸”åªèƒ½ä»¥ default æ–¹å¼å¼•å…¥ã€‚ä¾‹å¦‚ï¼š\n// foo.js const a = 1 const b = 2 const c = () =\u003e a + b module.exports = { a, b, c } // bar.mjs import abc from './foo.js' console.log(abc.a, abc.b, abc.c()) // 1, 2, 3 ä¹Ÿå°±æ˜¯è¯´ï¼Œmodule.exports ç›¸å½“äºï¼š\nconst abc = { a, b, c } export default abc ","esm-å’Œ-cjs-çš„å·®å¼‚#\u003ccode\u003eESM\u003c/code\u003e å’Œ \u003ccode\u003eCJS\u003c/code\u003e çš„å·®å¼‚":"","æ¨¡å—åŒ–åŠå…¶ä¼˜åŠ¿#æ¨¡å—åŒ–åŠå…¶ä¼˜åŠ¿":""},"title":"æ¨¡å—ç®¡ç†"},"/mysql/":{"data":{"error-1819-hy000-your-password-does-not-satisfy-the-current-policy-requirements#ERROR 1819 (HY000): Your password does not satisfy the current policy requirements":"è¿è¡Œä¸‹æ–¹ä»£ç ä¼šæŠ¥é”™\nALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'admin' é”™è¯¯ä¿¡æ¯ï¼šERROR 1819 (HY000): Your password does not satisfy the current policy requirementsã€‚å¯†ç ä¸ç¬¦åˆå®‰å…¨è¦æ±‚ï¼Œæ”¹ä¸‹å¯†ç çš„å®‰å…¨è¦æ±‚å°±å¯ä»¥äº†ã€‚è§£å†³æ­¥éª¤ï¼š\nç™»å½• MySQL\nmysql -u root -p æ£€æŸ¥å½“å‰å¯†ç ç­–ç•¥\nSHOW VARIABLES LIKE 'validate_password%'; +-------------------------------------------------+--------+ | Variable_name | Value | +-------------------------------------------------+--------+ | validate_password.changed_characters_percentage | 0 | | validate_password.check_user_name | ON | | validate_password.dictionary_file | | | validate_password.length | 8 | | validate_password.mixed_case_count | 1 | | validate_password.number_count | 1 | | validate_password.policy | MEDIUM | | validate_password.special_char_count | 1 | +-------------------------------------------------+--------+ ä¿®æ”¹å½“å‰å¯†ç ç­–ç•¥\nSET GLOBAL validate_password.length=4; SET GLOBAL validate_password.policy=LOW; ç°åœ¨å¯†ç ç­–ç•¥å·²ç»ä¿®æ”¹äº†\n+-------------------------------------------------+-------+ | Variable_name | Value | +-------------------------------------------------+-------+ | validate_password.changed_characters_percentage | 0 | | validate_password.check_user_name | ON | | validate_password.dictionary_file | | | validate_password.length | 4 | | validate_password.mixed_case_count | 1 | | validate_password.number_count | 1 | | validate_password.policy | LOW | | validate_password.special_char_count | 1 | +-------------------------------------------------+-------+ åˆ·æ–°æƒé™å¹¶å†æ¬¡å°è¯•ä¿®æ”¹å¯†ç \nFLUSH PRIVILEGES ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'admin'; ","mysqlå®‰è£…å’Œä½¿ç”¨#MySQLå®‰è£…å’Œä½¿ç”¨":"MySQLå®‰è£…å’Œä½¿ç”¨","å‘½ä»¤è¡Œå·¥å…·#å‘½ä»¤è¡Œå·¥å…·":"å…¨éƒ¨å‘½ä»¤è¡Œè¯·æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼šmysql Client Commands\nä¸‹é¢åˆ—ä¸¾å‡ ç§å¸¸ç”¨çš„ï¼š\n\\g å’Œ \\G éƒ½æ˜¯å‘½ä»¤çš„ç»“æŸç¬¦ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ ; æ¥ç»“æŸå‘½ä»¤ã€‚\n\\g # å°†å‘½ä»¤å‘é€åˆ° MySQL æœåŠ¡å™¨ \\G # å°†å‘½ä»¤å‘é€åˆ° MySQL æœåŠ¡å™¨ï¼Œå¹¶ä¸”æ ¼å¼åŒ–è¾“å‡º \\c # æ¸…é™¤å½“å‰è¾“å…¥ \\q # é€€å‡º MySQL ","åŸºç¡€ä½¿ç”¨#åŸºç¡€ä½¿ç”¨":"è¿æ¥ MySQL mysql -u root -p Enter password:****** åŸºæœ¬å‘½ä»¤ æŸ¥çœ‹æ•°æ®åº“åˆ—è¡¨ SHOW DATABASES; åˆ›å»ºæ•°æ®åº“ CREATE DATABASE testdb; ä½¿ç”¨æ•°æ®åº“ USE testdb; åˆ›å»ºè¡¨ CREATE TABLE users ( id INT AUTO_INCREMENT PRIMARY KEY, name VARCHAR(100), email VARCHAR(100) ); æŸ¥çœ‹è¡¨ç»“æ„ DESCRIBE users; æ•°æ®æ“ä½œ æ’å…¥æ•°æ® INSERT INTO users (name, email) VALUES ('John Doe', 'john@example.com'); æŸ¥è¯¢æ•°æ® SELECT * FROM users; æ›´æ–°æ•°æ® UPDATE users SET email = 'john.doe@example.com' WHERE name = 'John Doe'; åˆ é™¤æ•°æ® DELETE FROM users WHERE name = 'John Doe'; å¸¸ç”¨åŠŸèƒ½ æ¡ä»¶æŸ¥è¯¢ SELECT * FROM users WHERE email LIKE '%@example.com'; æ’åºæŸ¥è¯¢ SELECT * FROM users ORDER BY name ASC; èšåˆå‡½æ•° SELECT COUNT(*) FROM users; SELECT AVG(id) FROM users; å¤šè¡¨æ“ä½œ åˆ›å»ºç¬¬äºŒä¸ªè¡¨ CREATE TABLE orders ( order_id INT AUTO_INCREMENT PRIMARY KEY, user_id INT, product_name VARCHAR(100), FOREIGN KEY (user_id) REFERENCES users(id) ); è¿æ¥æŸ¥è¯¢ SELECT users.name, orders.product_name FROM users JOIN orders ON users.id = orders.user_id; SELECT users.name, orders.product_name å­å¥æŒ‡å®šæˆ‘ä»¬å¸Œæœ›ä»æ•°æ®åº“ä¸­æå–çš„åˆ—ï¼Œè¿™é‡Œä¼šæå–åˆ°ä¸¤ä¸ªåˆ—ï¼š\nusers è¡¨ä¸­çš„ name åˆ—(users.name) orders è¡¨ä¸­çš„ product_name åˆ—(orders.product.name) FROM users å­å¥æŒ‡å®šæˆ‘ä»¬æŸ¥è¯¢çš„ç¬¬ä¸€ä¸ªè¡¨ï¼Œå³ users è¡¨ã€‚ JOIN orders ON users.id = orders.user_id å­å¥ç”¨äºå°†ä¸¤ä¸ªè¡¨è¿æ¥èµ·æ¥ã€‚å³ä½¿ç”¨å†…è¿æ¥(INNER JOIN)å°† users è¡¨å’Œ orders è¡¨å…³è”èµ·æ¥ã€‚è¿æ¥æ¡ä»¶æ˜¯ users.id = orders.user_idã€‚ å†…è¿æ¥(INNER JOIN)ä¼šè¿”å›ä¸¤ä¸ªè¡¨ä¸­æ»¡è¶³æ¡ä»¶çš„æ‰€æœ‰è®°å½•ã€‚å¦‚æœä¸€æ¡è®°å½•åœ¨ users è¡¨å’Œ orders è¡¨ä¸­éƒ½æœ‰å¯¹åº”çš„åŒ¹é…è®°å½•ï¼Œé‚£ä¹ˆè¿™æ¡è®°å½•ä¼šè¢«åŒ…æ‹¬åœ¨ç»“æœé›†ä¸­ã€‚ç®€å•æ¥è¯´ï¼Œè¿™ä¸ªæŸ¥è¯¢ä¼šè¿”å›æ‰€æœ‰æœ‰è®¢å•çš„ç”¨æˆ·åŠå…¶è®¢å•çš„äº§å“åç§°ã€‚\nä¸¾ä¸ªä¾‹å­ï¼Œå‡å¦‚æœ‰ä»¥ä¸‹ä¸¤ä¸ªè¡¨ï¼š\nusers è¡¨ï¼š\nid name 1 Alice 2 Bob 3 Charlie orders è¡¨ï¼š\norder_id user_id product_name 101 1 Laptop 102 1 SmartPhone 103 2 Tablet æ‰§è¡Œä¸Šè¿° SQL è¯­å¥åï¼ŒæŸ¥è¯¢ç»“æœæ˜¯ï¼š\nname product_name Alice Laptop Alice Smartphone Bob Tablet ","å®‰è£…#å®‰è£…":"MySQL Community Server MySQL Community Server æ˜¯æ•°æ®åº“æœåŠ¡å™¨ï¼Œå®ƒè´Ÿè´£å®é™…å­˜å‚¨å’Œç®¡ç†æ•°æ®ã€‚\nä¸‹è½½åœ°å€ï¼šhttps://dev.mysql.com/downloads/mysql/\né€‰æ‹©ç‰ˆæœ¬å’Œæ“ä½œç³»ç»Ÿï¼Œç‚¹å‡» Download æŒ‰é’®ä¸‹è½½ã€‚æˆ‘æ˜¯ macOS 14 ç³»ç»Ÿï¼ŒM1 èŠ¯ç‰‡ï¼Œè¿™é‡Œå°±é€‰æ‹©äº† macOS 14 (ARM, 64-bit), DMG Archive ä¸‹è½½ã€‚\nå®‰è£…å®Œæˆåï¼Œæ‰“å¼€ç³»ç»Ÿè®¾ç½®ï¼Œæ‹‰åˆ°æœ€ä¸‹æ–¹å°±èƒ½çœ‹åˆ° MySQLï¼Œç‚¹å‡»æŒ‰é’®è¿è¡Œ MySQL æœåŠ¡ã€‚\nMySQL Workbench MySQL Workbench æ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯åº”ç”¨ç¨‹åºï¼Œä½ å¯ä»¥ç”¨å®ƒæ¥è¿æ¥åˆ° MySQL Community Serverï¼Œè¿›è¡Œæ•°æ®åº“è®¾è®¡ã€å¼€å‘å’Œç®¡ç†ç­‰æ“ä½œã€‚\nè¦æ³¨æ„ç‰ˆæœ¬ä¿æŒä¸€è‡´ï¼Œä¸‹è½½åœ°å€ï¼šhttps://dev.mysql.com/downloads/workbench/\nå®‰è£…åæ‰“å¼€ï¼Œç‚¹å‡» Connection æˆ–è€…æ–°å»ºä¸€ä¸ªï¼Œè¾“å…¥å¯†ç å°±OKäº†ã€‚","å¸¸è§é—®é¢˜#å¸¸è§é—®é¢˜":"","ç¯å¢ƒå˜é‡#ç¯å¢ƒå˜é‡":"æŸ¥çœ‹å½“å‰ shell\necho $SHELL å¦‚æœæ˜¯ /bin/bashï¼Œè¯´æ˜ç”¨çš„æ˜¯ bashï¼Œå¦‚æœæ˜¯ /bin/zshï¼Œè¯´æ˜ç”¨çš„æ˜¯ zshã€‚\nå¦‚æœæ˜¯ bash:\n# 1. æ›´æ”¹ vim ~/.bash_profile # 2. æ·»åŠ  export PATH=${PATH}:/usr/local/mysql/bin # 3. æ›´æ–° source ~/.bash_profile å¦‚æœæ˜¯ zshï¼š\n# 1. æ›´æ”¹ vim ~/.zshrc # 2. æ·»åŠ  export PATH=${PATH}:/usr/local/mysql/bin # 3. æ›´æ–° source ~/.zshrc ","ç”¨-mysql-workbench-æ–°å»º-table-æ—¶æ²¡æœ‰-apply-æŒ‰é’®#ç”¨ mysql workbench æ–°å»º table æ—¶æ²¡æœ‰ apply æŒ‰é’®":"8.0.36 ç‰ˆæœ¬æœ‰é—®é¢˜ï¼Œæ›¿æ¢æˆ 8.0.34 å°±æ­£å¸¸ä½¿ç”¨äº†ã€‚","è¿›å…¥-mysql-cli#è¿›å…¥ MySQL CLI":" mysql -u root -p è¾“å…¥å®‰è£…æ—¶å¯†ç ï¼Œå³å¯æˆåŠŸè¿›å…¥ MySQL CLIã€‚"},"title":"MySQL å®‰è£…å’ŒåŸºç¡€ä½¿ç”¨"},"/npm/":{"data":{"":"","npm#NPM":"NPM NPM æ˜¯ Node.js è‡ªå¸¦çš„åŒ…ç®¡ç†å·¥å…·ã€‚\nNode.js çš„æ¨¡å—å¤§è‡´åˆ†ä¸ºå†…éƒ¨æ¨¡å—å’Œå…¶ä»–æ¨¡å—ã€‚å†…éƒ¨æ¨¡å—æ˜¯ Node.js å†…éƒ¨é›†æˆçš„æ¨¡å—ï¼Œä¸éœ€è¦å¼•ç”¨ JS å¤–éƒ¨æ–‡ä»¶ï¼Œè€Œæ˜¯é€šè¿‡ require æˆ– import æ¨¡å—åå¼•å…¥ã€‚\næ¯”å¦‚å†…ç½® fs æ¨¡å—ï¼ˆæ–‡ä»¶æ“ä½œç›¸å…³çš„æ¨¡å—ï¼‰ï¼Œå¯ä»¥è¿™æ ·å¼•å…¥ï¼š\nconst fs = require('fs') é™¤äº†ä¸Šå›¾è¿™äº›å†…ç½®æ¨¡å—å¤–ï¼Œåœ¨å¼€å‘ä¸­è¿˜ä¼šä½¿ç”¨å¾ˆå¤šå…¶ä»–æ¨¡å—ï¼Œæœ‰ä¸¤ç§æ–¹å¼å¯ä»¥å¼•å…¥ï¼š\né€šè¿‡æ–‡ä»¶è·¯å¾„å¼•å…¥\nä¾‹å¦‚ï¼Œåœ¨ä¸‹é¢è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œæƒ³è¦åœ¨ b ç›®å½•ä¸‹çš„ bar.js ä¸­å¼•å…¥ a ç›®å½•ä¸‹çš„ foo.jsã€‚\n- a foo.js - b bar.js å¯ä»¥åœ¨ bar.js é‡Œè¿™æ ·å¼•å…¥ï¼š\nconst foo = require('../a/foo.js') é€šè¿‡ NPM å°†æ¨¡å—å®‰è£…åˆ°é¡¹ç›®ä¸­(é»˜è®¤æ˜¯ node_modules ç›®å½•)ï¼Œåœ¨ä»£ç ä¸­ç”¨åŒ…åæ¥å¼•ç”¨æ¨¡å—ã€‚\nnpm registry æ˜¯ NPM çš„å®˜æ–¹ä»“åº“ï¼Œå¯æŸ¥æ‰¾éœ€è¦çš„åŒ…ï¼Œå¹¶æŒ‰ç…§åŒ…æ–‡æ¡£çš„æŒ‡å¼•è¿›è¡Œå®‰è£…ä½¿ç”¨ã€‚\næ¯”å¦‚ï¼Œdayjs è¿™ä¸ªæ’ä»¶ï¼Œä½¿ç”¨ NPM å®‰è£…ï¼š\nnpm install dayjs ä½¿ç”¨ï¼š\nconst dayjs = require('dayjs') dayjs().format() å½“é€šè¿‡åŒ…åå¼•å…¥æ¨¡å—æ—¶ï¼ŒNode.js ä¼šæ ¹æ® resolve ç®—æ³•å…ˆæœç´¢æ¨¡å—æ‰€åœ¨çš„ç›®å½•ä¸‹çš„ node_modulesï¼Œå¦‚æœæ²¡æ‰¾åˆ°ï¼Œä¼šé€’å½’æŸ¥æ‰¾ä¸Šçº§ç›®å½•ä¸­çš„ node_modulesï¼Œç›´åˆ°æ ¹ç›®å½•ã€‚\nNPM å€¼å¾—è®²çš„å¾ˆå¤šï¼Œä»¥åä¼šå•ç‹¬å¼€ä¸ªä¸“é¢˜âœï¸ã€‚"},"title":"NPM"},"/personal-rss-feed-recommendations/":{"data":{"":"","#":"ä½œä¸ºä¸€ä¸ªå¤šå¹´ä½¿ç”¨ RSS é˜…è¯»çš„äººæ¥è¯´ï¼ŒRSS æ˜¯æˆ‘æ¯å¤©äº†è§£æœ€æ–°çš„ç§‘æŠ€ã€æŠ€æœ¯ã€æ—¶äº‹çš„ä¸»è¦æ¸ é“ä¹‹ä¸€ã€‚\nè¿™ç¯‡æ–‡ç« ä¼šæ¨èä¸€äº›æˆ‘è®¤ä¸ºä¸é”™çš„è®¢é˜…ï¼Œä¸ç®¡ä½ åˆšä¸Šæ‰‹ RSS æˆ–è€…æƒ³ä¸°å¯Œè‡ªå·±çš„è®¢é˜…åº“ï¼Œéƒ½å¯ä»¥å‚è€ƒä¸€ä¸‹æˆ‘çš„ Listã€‚\nç§‘æŠ€ ä¸­æ–‡ æå®¢å…¬å›­\né˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿—\n1Link.Fun\nSuperTechFansï¼šæ¯å¤©ç”¨ AI æ€»ç»“ Hacker News çš„ Top 10 æ–‡ç« \nè‹±æ–‡ tldr.techï¼šToo long donâ€™t readï¼Œæ¯æ—¥å‘é€å‡ åˆ™ç§‘æŠ€æ–‡ç« æ‘˜è¦\nthe DONUTï¼šä¸æ­¢ç§‘æŠ€æ¶ˆæ¯ï¼Œæ¶µç›–å¾ˆå¤š\næŠ€æœ¯ ä¸­æ–‡ å±±æœˆå‰ç«¯å‘¨åˆŠ\næ˜é‡‘å‰ç«¯æœ¬å‘¨æœ€çƒ­\nç¾å›¢æŠ€æœ¯å›¢é˜Ÿ\nå€¼å¾—ä¸€è¯»æŠ€æœ¯åšå®¢\nå‰ç«¯é£Ÿå ‚\nè‹±æ–‡ Frontend Focus\nWeb.dev\nChangelog News\nJavaScript Weekly\nNode Weekly\næ¨èçš„ä¸å¤šï¼Œä¹Ÿå¸Œæœ›å¤§å®¶ä¸è¦ä¸€æ¬¡æ€§è®¢é˜…å¤ªå¤šã€‚å› ä¸ºæˆ‘ç»å†è¿‡ä¸€è‚¡è„‘è®¢é˜…å¤§é‡ newsletterï¼Œä¸€å¤©æ¥æ”¶å‡ ç™¾ä¸ªæ¨é€ï¼Œæœ€åç»“æœæ˜¯å‹æ ¹ä¸ä¼šæ‰“å¼€å»é˜…è¯»ï¼Œä»è®¢é˜…åˆ°æ”¾å¼ƒã€‚å¸Œæœ›å¤§å®¶åœ¨ç²¾ä¸åœ¨å¤šï¼Œè¿™ä¹Ÿé¿å…äº†é•¿æœŸæ²‰æµ¸åœ¨ RSS é˜…è¯»è€Œå¯¼è‡´çš„ä¿¡æ¯èŒ§æˆ¿ã€‚\né™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘æœ€è¿‘åœ¨ä½¿ç”¨çš„é˜…è¯»å·¥å…·æ˜¯ Readwise Readerï¼Œä½¿ç”¨ä½“éªŒåŠå…¶èˆ’é€‚ï¼Œå¼ºçƒˆæ¨èï¼Œåç»­æˆ‘ä¹Ÿä¼šå†™ä¸“é—¨ä¸€ç¯‡æ–‡ç« æ¥ä»‹ç»ä¸‹è¿™ä¸ªä¼˜ç§€çš„ Web åº”ç”¨ã€‚"},"title":"ä¸ªäººå‘çš„ RSS è®¢é˜…æ¨è"},"/pre-knowledge-of-nodejs/":{"data":{"":"","nodejs-æ˜¯-javascript-è¿è¡Œæ—¶ç¯å¢ƒ#Node.js æ˜¯ JavaScript è¿è¡Œæ—¶ç¯å¢ƒ":"Node.js æ˜¯ JavaScript è¿è¡Œæ—¶ç¯å¢ƒ Node.jsÂ® is an open-source, cross-platform JavaScript runtime environment.å¼•ç”¨æ¥æºï¼šNode.js\nNode.js å¹¶ä¸æ˜¯ä¸€ç§è¯­è¨€è€Œæ˜¯ä¸€ä¸ªå¹³å°ï¼Œæ˜¯ JavaScript çš„è¿è¡Œæ—¶ç¯å¢ƒ(runtime environment)/å®¿ä¸»ç¯å¢ƒ(host environment)ã€‚\nè®¨è®º Node.js å°±ä¸å¾—ä¸æåˆ° Chrome V8 å¼•æ“ã€‚09å¹´ï¼Œè°·æ­Œå¼€å§‹ç ”å‘ Chrome æµè§ˆå™¨ï¼Œè¿™ä¹Ÿæ˜¯ç°ä»Šä½¿ç”¨æœ€ä¸ºå¹¿æ³›çš„æµè§ˆå™¨ï¼Œç”± Lars Bak é¢†å¯¼å¼€å‘çš„ Chrome V8 å¼•æ“ä¹Ÿç›¸åº”é—®ä¸–ï¼ŒJavaScript å°±æ­¤å±•å¼€äº†ä¸€åœºæ€§èƒ½é©å‘½ï¼ŒNode.js å°±æ˜¯åŸºäº Chrome V8 å¼•æ“æ„å»ºçš„ã€‚éšåï¼ŒNode.js çš„ä½œè€… Ryan Dahl è¿˜æ„å»ºäº† Denoã€‚\nå¦‚ä»Šï¼ŒJavaScript çš„å±‚çº§æ¶æ„ä¹ŸåŸºæœ¬è¶‹äºç¨³å®šï¼Œå¦‚å›¾ï¼š\nå›¾ç‰‡æ¥æºï¼šæ˜é‡‘å°å†Œ\næœ€ä¸‹é¢çš„å±‚çº§æ˜¯è„šæœ¬è¯­è¨€è§„èŒƒ(Spec)ï¼ŒECMAScriptã€‚ å†å¾€ä¸Šä¸€å±‚æ˜¯è¯­è¨€å®ç°ï¼ŒJavaScriptã€JScriptã€ActionScript ç­‰éƒ½æ˜¯å¯¹ ECMAScript çš„è¯­è¨€å®ç°ã€‚ åˆ°äº†å¼•æ“å±‚é¢ï¼Œé™¤äº†ä¸Šæ–‡æåˆ°çš„ Chrome V8 å¤–ï¼Œè¿˜æœ‰ SpiderMonkeyã€QuickJSã€JerryScript ç­‰å¸¸è§å¼•æ“ã€‚ æœ€ä¸Šé¢æ˜¯è¿è¡Œæ—¶ç¯å¢ƒï¼ŒåŸºäº Chrome V8 å°è£…çš„è¿è¡Œæ—¶ç¯å¢ƒæœ‰ Node.jsã€Chromiumã€Denoã€CloudFlare Workersï¼ŒFirefox æ˜¯åŸºäº SpiderMonkey å°è£…çš„è¿è¡Œæ—¶ç¯å¢ƒã€‚ ","ä½¿ç”¨åœºæ™¯#ä½¿ç”¨åœºæ™¯":" æœåŠ¡ç«¯\nNode.js æä¾›äº†åŸºäºäº‹ä»¶é©±åŠ¨å’Œéé˜»å¡çš„æ¥å£ï¼Œå¯ç”¨äºç¼–å†™é«˜å¹¶å‘çŠ¶æ€ä¸‹çš„ç¨‹åºï¼Œè€Œä¸” JavaScript çš„åŒ¿åå‡½æ•°ã€é—­åŒ…ã€å›è°ƒå‡½æ•°ç­‰ç‰¹æ€§å°±æ˜¯ä¸ºäº‹ä»¶é©±åŠ¨è€Œè®¾è®¡çš„ã€‚\nNode.js ä¸€äº›å†…ç½®æ¨¡å—å¦‚ httpã€netã€fsï¼Œå°±æ˜¯ä¸ºæœåŠ¡ç«¯è®¾è®¡çš„ã€‚æ— è®ºæ˜¯ HTTPï¼Œè¿˜æ˜¯ TCPã€UDPï¼Œåˆæˆ–æ˜¯ RPC æœåŠ¡ï¼ŒNode.js éƒ½å¯ä»¥èƒœä»»ã€‚\næ¡Œé¢ç«¯\nElectron.jsï¼Œç”±OpenJSåŸºé‡‘ä¼šå¼€å‘å’Œç»´æŠ¤çš„è‡ªç”±å¼€æºè½¯ä»¶æ¡†æ¶ã€‚è¯¥æ¡†æ¶æ—¨åœ¨ä½¿ç”¨Chromiumæµè§ˆå™¨å¼•æ“ç‰ˆæœ¬å’Œä½¿ç”¨Node.jsè¿è¡Œæ—¶ç¯å¢ƒçš„åç«¯æ¸²æŸ“çš„ç½‘ç»œæŠ€æœ¯åˆ›å»ºæ¡Œé¢åº”ç”¨ç¨‹åºã€‚\nVisual Studio Codeã€1Passwordã€é’‰é’‰ç­‰è½¯ä»¶ï¼Œéƒ½æ˜¯åŸºäº Electron å¼€å‘çš„ã€‚\nç«¯æ¸¸\né™¤äº†é€šè¿‡ WebGL åœ¨æµè§ˆå™¨é‡Œå†™å‰ç«¯é¡µé¢ä¸Šçš„æ¸¸æˆã€é€šè¿‡ Electron å°è£…æˆçœ‹èµ·æ¥åƒç«¯æ¸¸çš„æ¸¸æˆå¤–ï¼ŒJavaScript è¿˜èƒ½é€šè¿‡ Node.js çš„ binding å»ä½¿ç”¨ OpenGL ç”šè‡³ DirectX å»å†™è´§çœŸä»·å®çš„æ¡Œé¢æ¸¸æˆã€‚\næœºå™¨å­¦ä¹ \npipcook\nNode.js æœ€æ—©è¢«è®¾æƒ³ä¸ºä¸€ç§ç”¨äºæ„å»ºæœåŠ¡ç«¯åº”ç”¨çš„æŠ€æœ¯ï¼Œä½†ä½œä¸ºè¿è¡Œåœ¨æ“ä½œç³»ç»Ÿä¸­çš„ JavaScript è¿è¡Œæ—¶ç¯å¢ƒï¼Œå®ƒå·²ç»æˆä¸ºäº†ä¸€ä¸ªå¹³å°ï¼Œå¯é€‚é…é¢†åŸŸæ¶µç›–äº†æ³›å‰ç«¯å’Œåç«¯ï¼Œä¼ ç»ŸæœåŠ¡å’Œ Serverlessï¼Œå·¥å…·ã€å•†ä¸šã€æ¸¸æˆç­‰ç­‰ã€‚","åŸºæœ¬æ¶æ„#åŸºæœ¬æ¶æ„":" å›¾ç‰‡æ¥æºï¼šmedium.com\nNode.js æ˜¯è¿è¡Œåœ¨æ“ä½œç³»ç»Ÿä¹‹ä¸Šçš„ï¼Œåº•å±‚ç”± Chrome V8 å¼•æ“å’Œä¸€äº› C/C++ å†™çš„åº“æ„æˆï¼Œæ¯”å¦‚ libUvã€c-aresã€llhttp/http-parserã€open-sslã€zlibç­‰ã€‚å…¶ä¸­ï¼ŒlibUV è´Ÿè´£å¤„ç†äº‹ä»¶å¾ªç¯ï¼Œc-aresã€llhttp/http-parserã€open-sslã€zlib ç­‰åº“æä¾› DNS è§£æã€HTTP åè®®ã€HTTPS å’Œæ–‡ä»¶å‹ç¼©ç­‰åŠŸèƒ½ã€‚\nä¸­é—´å±‚ç”± Node.js Bindingsã€Node.js Standard Library å’Œ C/C++ AddOns æ„æˆã€‚Node.js Bindings å±‚çš„ä½œç”¨æ˜¯å°†åº•å±‚é‚£äº›ç”¨ C/C++ å†™çš„åº“æ¥å£æš´éœ²ç»™ JS ç¯å¢ƒï¼Œè€Œ Node.js Standard Library æ˜¯ Node.js æœ¬èº«çš„æ ¸å¿ƒæ¨¡å—ã€‚è‡³äº C/C++ AddOnsï¼Œå®ƒå¯ä»¥è®©ç”¨æˆ·è‡ªå·±çš„ C/C++ æ¨¡å—é€šè¿‡æ¡¥æ¥çš„æ–¹å¼æä¾›ç»™Node.jsã€‚\nå†ä¸Šä¸€å±‚æ˜¯ Node.js çš„ API å±‚ï¼Œæˆ‘ä»¬ä½¿ç”¨ Node.js å¼€å‘åº”ç”¨ï¼Œä¸»è¦ä½¿ç”¨çš„å°±æ˜¯ API å±‚ï¼ŒNode.js åº”ç”¨æœ€ç»ˆè¿è¡Œåœ¨ API å±‚ä¹‹ä¸Šã€‚"},"title":"Node.js å‰ç½®çŸ¥è¯†"},"/vue-reactivity-source-code-review/":{"data":{"":"","vue2-å“åº”å¼åŸç†#Vue2 å“åº”å¼åŸç†":"åœ¨ Vue2 ä¸­ï¼Œå½“ä¸€ä¸ª JavaScript å¯¹è±¡ä¼ å…¥ Vue å®ä¾‹ä½œä¸º data é€‰é¡¹æ—¶ï¼ŒVue ä¼šéå†æ­¤å¯¹è±¡æ‰€æœ‰çš„ propertyï¼Œå¹¶ä½¿ç”¨ Object.defineProperty() æŠŠè¿™äº› property è½¬ä¸º getter/setterã€‚åœ¨ getter ä¸­æ”¶é›†ä¾èµ–ï¼Œåœ¨ setter ä¸­è§¦å‘æ›´æ–°ï¼šæ¯ä¸ªç»„ä»¶å®ä¾‹éƒ½å¯¹åº”ä¸€ä¸ª watcher å®ä¾‹ï¼Œå®ƒä¼šåœ¨ç»„ä»¶çš„æ¸²æŸ“è¿‡ç¨‹ä¸­æŠŠæ¥è§¦è¿‡çš„æ•°æ® property è®°å½•ä¸ºä¾èµ–ï¼Œå½“ä¾èµ–é¡¹çš„ setter è§¦å‘æ—¶ï¼Œä¼šå»é€šçŸ¥ watcherï¼Œä»è€Œä½¿ä»–å…³è”çš„ç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚è¿™å°±æ˜¯ Vue2 å“åº”å¼å®ç°çš„æ€è·¯ï¼Œè‡³äºå…·ä½“æ˜¯å¦‚ä½•å®ç°çš„ï¼Œä¸‹æ–‡å°†ä¼šå±•å¼€åˆ†æã€‚\nObject.defineProperty() Object.defineProperty() æ˜¯ Vue å®ç°å“åº”å¼çš„åŸºç¡€ï¼Œå®ƒå…è®¸ç²¾ç¡®åœ°æ·»åŠ æˆ–ä¿®æ”¹å¯¹è±¡ä¸Šçš„å±æ€§ï¼Œè¯­æ³•å¦‚ä¸‹ï¼š\nObject.defineProperty(obj, prop, descriptor) å‚æ•°ï¼š obj: è¦å®šä¹‰å±æ€§çš„å¯¹è±¡ prop: è¦å®šä¹‰æˆ–ä¿®æ”¹çš„å±æ€§å descriptor: è¦å®šä¹‰æˆ–ä¿®æ”¹çš„å±æ€§æè¿°ç¬¦\ndescriptor å¸¸ç”¨å±æ€§ï¼š\nenumerableï¼šå±æ€§æ˜¯å¦å¯æšä¸¾ï¼Œé»˜è®¤ä¸º false configurableï¼šå±æ€§æ˜¯å¦å¯è¢«ä¿®æ”¹æˆ–åˆ é™¤ï¼Œé»˜è®¤ä¸º false getï¼šè·å–å±æ€§çš„æ–¹æ³• setï¼šè®¾ç½®å±æ€§çš„æ–¹æ³• å‚è€ƒï¼šMDN-Object.defineProperty()\nå®ç°å“åº”å¼ åœ¨ Vue æºç ä¸­ï¼Œé€šè¿‡ defineReactive å‡½æ•°å¯¹ Object.defineProperty è¿›è¡Œå°è£…,å®ç°å“åº”å¼ã€‚get ä¼šè§¦å‘ reactiveGetter å®ç°ä¾èµ–æ”¶é›†ï¼Œset ä¼šè§¦å‘ reactiveSetter é€šçŸ¥ä¾èµ–æ›´æ–°ã€‚ä¸‹é¢æ˜¯è¿™ä¸ªå‡½æ•°çš„æºç çš„ç®€åŒ–ç‰ˆæœ¬ï¼Œåªéœ€è¦çœ‹éæ³¨é‡Šéƒ¨åˆ†ï¼š\nå‚æ•°ï¼š\nobjï¼ˆéœ€è¦ç»‘å®šçš„å¯¹è±¡ï¼‰ keyï¼ˆå¯¹è±¡çš„å±æ€§åï¼‰ valï¼ˆå…·ä½“çš„å€¼ï¼‰ function defineReactive(obj, key, val) { // åˆ›å»ºä¾èµ–æ”¶é›†å™¨ // const dep = new Dep() Object.defineProperty(obj, key, { enumerable: true, configurable: true, get: function reactiveGetter() { // ä¾èµ–æ”¶é›† // if (Dep.target) { // dep.depend() // } return val }, set: function reactiveSetter(newVal) { if (newVal === val) return val = newVal // é€šçŸ¥æ‰€æœ‰ä¾èµ– // dep.notify() } }) } åœ¨æœ¬ç¯‡æ–‡ç« å¼€å¤´æåˆ°ï¼ŒVue ä¼šéå†å¯¹è±¡çš„æ‰€æœ‰å±æ€§propertyï¼Œæ‰€ä»¥ç°åœ¨è¿˜éœ€è¦å†å°è£…ä¸€å±‚ Observer å»éå†å¯¹è±¡ï¼Œå°†ä¸€ä¸ªæ™®é€š JavaScript å¯¹è±¡çš„æ‰€æœ‰å±æ€§è½¬æ¢æˆå“åº”å¼çš„ã€‚ç®€åŒ–ç‰ˆæœ¬å¦‚ä¸‹ï¼š\nclass Observer { constructor(value) { // ç»™è¢«è§‚å¯Ÿçš„å¯¹è±¡æ·»åŠ  __ob__ å±æ€§ï¼ŒæŒ‡å‘è¿™ä¸ª Observer å®ä¾‹ def(value, '__ob__', this) if(Array.isArray(value)) { // åŠ«æŒæ•°ç»„æ–¹æ³• // ... // å¤„ç†æ•°ç»„ this.observeArray() } else { // å¤„ç†å¯¹è±¡ const keys = Object.keys(value) for (let i = 0; i \u003c keys.length; i++) { const key = keys[i] defineReactive(value, key, NO_INITIAL_VALUE, undefined, shallow, mock) } } } observeArray(value) { for (let i = 0, l = value.length; i \u003c l; i++) { observe(value[i], false, this.mock) } } } å…¶ä¸­ï¼Œdef() æ˜¯ä¸€ä¸ªå·¥å…·å‡½æ•°ï¼Œç”¨æ¥ç»™å¯¹è±¡æ·»åŠ å±æ€§ï¼š\nexport function def(obj, key, val) { Object.defineProperty(obj, key, { value: val, }) } observe() æ˜¯å…¥å£å‡½æ•°ï¼Œä¼šè¿”å› Observer å®ä¾‹ï¼š\nfunction observe(value) { if (typeof value !== 'object') return let ob if (hasOwn(value, '__ob__') \u0026\u0026 value.__ob__ instanceof Observer) { ob = value.__ob__ } else { ob = new Observer(value) } return ob } ä¾èµ–æ”¶é›† åˆšæ‰ defineReactive ä¸­è¢«æ³¨é‡Šæ‰çš„å‡ è¡Œä»£ç ï¼Œä¹Ÿå°±æ˜¯ä¸‹æ–‡ä¸­é«˜äº®çš„éƒ¨åˆ†ï¼šåœ¨ get æ—¶è¿›è¡Œä¾èµ–æ”¶é›†ï¼Œåœ¨ set æ—¶é€šçŸ¥æ‰€æœ‰ä¾èµ–ï¼Œè¿™æ˜¯å®ç°å“åº”å¼ç³»ç»Ÿçš„å¦ä¸€ä¸ªé‡è¦éƒ¨åˆ†â€”â€”ä¾èµ–æ”¶é›†ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 function defineReactive(obj, key, val) { // åˆ›å»ºä¾èµ–æ”¶é›†å™¨ const dep = new Dep() Object.defineProperty(obj, key, { enumerable: true, configurable: true, get: function reactiveGetter() { // ä¾èµ–æ”¶é›† if (Dep.target) { dep.depend() } return val }, set: function reactiveSetter(newVal) { if (newVal === val) return val = newVal // é€šçŸ¥æ‰€æœ‰ä¾èµ– dep.notify() } }) } ä¸ºä»€ä¹ˆéœ€è¦ä¾èµ–æ”¶é›† ä¸¾ä¸ªä¾‹å­ï¼Œç°åœ¨æœ‰è¿™ä¹ˆä¸ª Vue å¯¹è±¡ï¼š\nnew Vue({ template:` \u003cdiv\u003e \u003cspan\u003e{{ text1 }}\u003c/span\u003e \u003cspan\u003e{{ text2 }}\u003c/span\u003e \u003c/div\u003e `, data: { text1: 'text1', text2: 'text2', text3: 'text3', } }) è¦å¯¹ text3 è¿›è¡Œä¿®æ”¹ï¼š\ndata.text3 = 'text3 modify' è™½ç„¶ä¿®æ”¹äº† data ä¸­ text3 çš„å€¼ï¼Œä½†æ˜¯ç”±äºæ¨¡æ¿æ¸²æŸ“ä¸­å¹¶æ²¡æœ‰ç”¨åˆ° text3ï¼Œæ‰€ä»¥å¹¶ä¸ä¼šè§¦å‘ä¸Šæ–‡ä¸­çš„ dep.notify() å»é€šçŸ¥ä¾èµ–ã€æ›´æ–°è§†å›¾ã€‚\nå†ä¸¾ä¸ªä¾‹å­ï¼Œå‡å¦‚ç°åœ¨æœ‰ä¸ªå…¨å±€å¯¹è±¡ï¼Œè€Œä¸”æˆ‘ä»¬åœ¨ä¸¤ä¸ª Vue å¯¹è±¡ä¸­ä½¿ç”¨äº†å®ƒã€‚\nlet globalObj = { text1: 'text1' } let o1 = new Vue({ template:` \u003cdiv\u003e\u003cspan\u003e{{ globalObj.text1 }}\u003c/span\u003e\u003c/div\u003e `, data: { globalObj } }) let o2 = new Vue({ template:` \u003cdiv\u003e\u003cspan\u003e{{ globalObj.text1 }}\u003c/span\u003e\u003c/div\u003e `, data: { globalObj } }) è¿™ä¸ªæ—¶å€™ä¿®æ”¹ globalObj.text1 çš„å€¼ï¼š\nglobalObj.text1 = 'text1 modify' åœ¨å“åº”å¼ç³»ç»Ÿä¸­ï¼Œå½“ globalObj.text1 çš„å€¼å˜åŒ–ï¼Œåº”è¯¥é€šçŸ¥ o1ã€o2 è¿™ä¸¤ä¸ª vm å®ä¾‹å»æ›´æ–°è§†å›¾ã€‚ä¾èµ–æ”¶é›†å°±æ˜¯æ¥å®ç°è¿™ä¸ªçš„ï¼šä¾èµ–æ”¶é›†ä¼šè®©è¿™ä¸ªæ•°æ®(globalObj.text1)çŸ¥é“ï¼Œæœ‰ä¸¤ä¸ªåœ°æ–¹(o1ã€o2)ä¾èµ–è‡ªèº«ï¼Œæ‰€ä»¥å½“è¿™ä¸ªæ•°æ®(globalObj.text1)å˜åŒ–æ—¶ï¼Œä¼šå»é€šçŸ¥ä¾èµ–è‡ªèº«çš„ o1ã€o2ã€‚\nä¾èµ–æ”¶é›†çš„æ ¸å¿ƒ â€”â€” Dep å’Œ Watcher è®©æˆ‘ä»¬å›å½’ä»£ç ï¼Œçœ‹çœ‹å…·ä½“æ˜¯å¦‚ä½•å®ç°ä¾èµ–æ”¶é›†çš„ã€‚\né¦–å…ˆéœ€è¦ä¸€ä¸ª Depï¼Œæ¯ä¸ª Dep å®ä¾‹æœ‰ä¸€ä¸ªæ•°ç»„å»å­˜æ”¾ watchersï¼Œå½“æ•°æ®å˜åŒ–æ—¶ä¼šé€šçŸ¥ watchers æ›´æ–°ã€‚åŒæ ·çš„ï¼Œæ¯ä¸ª Watcher å®ä¾‹ä¹Ÿæœ‰ä¸€ä¸ªæ•°ç»„å»å­˜æ”¾å®ƒä¾èµ–çš„ depsã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¾èµ–æ”¶é›†æ˜¯åŒå‘çš„ï¼ŒDep è®°å½• Watcherï¼ŒWatcher ä¹Ÿè®°å½• Depï¼Œè¿™ä¸ªå¾ˆé‡è¦ã€‚\nå¤šå¯¹å¤šï¼Œå“åº”å¼å¯¹è±¡ Object ä¸­å­˜åœ¨ Depï¼ŒDep ä¸­å­˜æ”¾å¤šä¸ª Watcherï¼ŒWatcher è´Ÿè´£é€šçŸ¥ä¾èµ–æ›´æ–°ã€‚\nå…ˆçœ‹çœ‹ Depï¼š\nclass Dep { static target // é™æ€å±æ€§ï¼Œå…¨å±€å”¯ä¸€çš„å½“å‰æ­£åœ¨æ‰§è¡Œçš„ Watcher id // å®ä¾‹å±æ€§ï¼Œæ¯ä¸ª dep çš„å”¯ä¸€æ ‡è¯† subs // å®ä¾‹å±æ€§ï¼Œå­˜å‚¨æ‰€æœ‰è®¢é˜…è€… constructor { this.id = uid++ this.subs = [] } // æ·»åŠ è®¢é˜…è€… addSub(sub) { this.subs.push(sub) } // ç§»é™¤è®¢é˜…è€… removeSub(sub) { remove(this.subs, sub) } // å»ºç«‹ä¾èµ–å…³ç³» depend() { if(Dep.target) { // å¦‚æœæœ‰æ­£åœ¨æ‰§è¡Œçš„ Watcherï¼Œå°†è¿™ä¸ª Watcher ä½œä¸ºä¾èµ– Dep.target.addDep(this) } } // é€šçŸ¥æ‰€æœ‰è®¢é˜…è€… notify() { for(let i = 0, l = this.subs.length; i \u003c l; i++) { this.subs[i].update() } } } Dep.target = null; å¦‚ä¸Šæ‰€è¿°ï¼Œclass Dep çš„ target ä½œä¸ºé™æ€å±æ€§ï¼Œç”¨æ¥è®°å½•å½“å‰å”¯ä¸€æ­£åœ¨æ‰§è¡Œçš„ Watcherï¼Œid ç”¨æ¥ç»™ Dep å®ä¾‹æ·»åŠ å”¯ä¸€æ ‡è¯†ï¼Œsubs ç”¨æ¥å­˜å‚¨æ‰€æœ‰è®¢é˜…è€…ã€‚addSub() å’Œ removeSub() ç”¨æ¥æ·»åŠ è®¢é˜…è€…ã€ç§»é™¤è®¢é˜…è€…ï¼Œdepend() ç”¨æ¥å»ºç«‹ä¾èµ–å…³ç³»ï¼Œnotify() ç”¨æ¥é€šçŸ¥æ‰€æœ‰çš„è®¢é˜…è€…ã€‚\nWatcher ä¼šå¤æ‚ä¸€ç‚¹ï¼Œè®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ï¼š\nclass Watcher { constructor (vm, expOrFn, cb, options={}) { if(options) { this.lazy = !!this.lazy this.sync = !!this.sync } this.vm = vm // Vue å®ä¾‹ this.cb = cb // å›è°ƒå‡½æ•° this.deps = [] // å­˜å‚¨è¯¥ watcher ä¾èµ–çš„æ‰€æœ‰ dep this.newDeps = [] // æ–°ä¸€è½®ä¾èµ–æ”¶é›†çš„ dep this.depIds = new Set() // ä¾èµ–çš„idé›†åˆï¼Œç”¨äºå»é‡ this.newDepIds = new Set() // æ–°ä¾èµ–æ”¶é›†çš„idé›†åˆ this.expression = expOrFn.toString() // ç”¨äºè°ƒè¯• this.dirty = this.lazy this.id = ++uid // å”¯ä¸€æ ‡è¯† // è¿™é‡Œå®šä¹‰äº† getter if(typeof expOrFn === 'function') { this.getter = expOrFn // å¦‚æœ expOrFn æ˜¯å‡½æ•°ï¼Œç›´æ¥ä½œä¸º getter } else { this.getter = parsePath(expOrFn) // å¦‚æœæ˜¯å­—ç¬¦ä¸²ï¼Œè½¬æ¢æˆè·å–å¯¹è±¡å±æ€§çš„å‡½æ•° } // ç«‹å³æ‰§è¡Œä¸€æ¬¡ getterï¼Œè¿›è¡Œåˆå§‹åŒ–å’Œä¾èµ–æ”¶é›† this.value = this.lazy ? undefined : this.get() } get() { pushTarget(this) // å°†å½“å‰ watcher è®¾ç½®ä¸ºå…¨å±€æ´»åŠ¨çš„ watcher let value try { // æ‰§è¡Œ getterï¼Œè§¦å‘è¢«è§‚å¯Ÿå¯¹è±¡çš„ getterï¼Œä»è€Œæ”¶é›†ä¾èµ– value = this.getter.call(this.vm, this.vm) } catch (e) { throw e } finally { popTarget() // æ¢å¤ä¹‹å‰æ´»åŠ¨çš„watcher this.cleanupDeps() // æ¸…ç†ä¾èµ– } return value } addDep(dep) { const id = dep.id // æ£€æŸ¥æ˜¯å¦å·²åœ¨æ–°çš„ä¾èµ–é›†åˆä¸­ if(!this.newDepIds.has(id)) { // æ·»åŠ åˆ°æ–°çš„ä¾èµ– id é›†åˆä¸­ this.newDepIds.add(id) // æ·»åŠ åˆ°æ–°çš„ä¾èµ–æ•°ç»„ä¸­ this.newDeps.push(dep) // æ£€æŸ¥æ˜¯å¦åœ¨æ—§ä¾èµ–ä¸­ if(!this.depIds.has(id)) { // å¦‚æœä¸åœ¨æ—§ä¾èµ–ä¸­ï¼Œè®© dep å»æ”¶é›†å½“å‰ watcher dep.addSub(this) } } } // æ¸…ç†ä¾èµ– cleanupDeps() { let i = this.deps.length // éå†æ—§ä¾èµ–æ•°ç»„ while (i--) { const dep = this.deps[i] // å¦‚æœæ–°ä¾èµ–æ•°ç»„ä¸­ä¸åŒ…å«è¿™ä¸ªæ—§ä¾èµ– if (!this.newDepIds.has(dep.id)) { // å°†è¿™ä¸ª watcher ä» dep ä¸­ç§»é™¤ dep.removeSub(this) } } // depIds æ›´æ–°ï¼Œæ¸…ç©º newDepIds let tmp: any = this.depIds this.depIds = this.newDepIds this.newDepIds = tmp this.newDepIds.clear() // deps æ›´æ–°ï¼Œæ¸…ç©º newDeps tmp = this.deps this.deps = this.newDeps this.newDeps = tmp this.newDeps.length = 0 } update() { // lazy æ¨¡å¼ï¼Œæ‡’è®¡ç®—ï¼Œä¸ä¼šç«‹å³é‡æ–°è®¡ç®—ï¼Œåªæ˜¯å°† dirty æ ‡è®°ä¸º true if (this.lazy) { this.dirty = true } else if (this.sync) { // sync æ¨¡å¼ï¼ŒåŒæ­¥æ›´æ–°æ¨¡å¼ï¼Œç«‹å³æ›´æ–° this.run() } else { // é»˜è®¤å¼‚æ­¥æ›´æ–°æ¨¡å¼ï¼Œå°† watcher æ”¾å…¥æ›´æ–°é˜Ÿåˆ— queueWatcher(this) } } run() { const value = this.get() // è·å–æ–°çš„å€¼ if(value !== this.value || isObject(value) || this.deep) { // å¦‚æœæ–°æ—§å€¼ä¸ç›¸ç­‰ | æ–°å€¼æ˜¯å¯¹è±¡ | æ·±åº¦ç›‘å¬ const oldValue = this.value // ä¿å­˜æ—§å€¼ this.value = value // è®¾ç½®æ–°å€¼ this.cb.call(this.vm, value, oldValue) // æ‰§è¡Œå›è°ƒå‡½æ•°ï¼Œå¹¶ä¼ å…¥æ–°å€¼å’Œæ—§å€¼ } } } åœ¨ Watcher çš„ constructor ä¸­ï¼Œä¼šå…ˆå¤„ç†ä¼ å…¥çš„ expOrFnï¼Œå½“å®ƒæ˜¯å‡½æ•°æ—¶ï¼Œä¼šç›´æ¥èµ‹ç»™ getterï¼Œå¦‚æœæ˜¯å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆè¿˜éœ€è¦ parsePath æ¥è½¬ä¸ºè®¿é—®å‡½æ•°ï¼Œä¾‹å¦‚ parsePath('user.name') ä¼šè¿”å›å‡½æ•°ï¼š(obj) =\u003e obj['user']['name']ï¼Œæ³¨æ„æ­¤å¤„ obj å°±æ˜¯ getter.call ä¸­è°ƒç”¨åˆ°çš„ vmï¼Œä¹Ÿå°±æ˜¯å½“å‰ Vue å®ä¾‹ã€‚æ­¤å¤–è¿˜ä¼šç«‹å³æ‰§è¡Œä¸€æ¬¡ getter()ï¼Œè¿›è¡Œåˆå§‹åŒ–å’Œä¾èµ–æ”¶é›†ã€‚\nçœ‹ä¸‹é¢çš„ä»£ç ï¼Œä¸ºäº†å¤„ç†åµŒå¥—çš„ Watcher åœºæ™¯ï¼Œåœ¨ getter() å¼€å§‹æ—¶ï¼Œä¼šå°†å½“å‰ Watcher ä¹Ÿå°±æ˜¯ target æ¨å…¥ targetStack æ ˆä¸­ï¼Œå¹¶å°† Dep.target æŒ‡å‘å½“å‰ Watcherï¼Œå¾… getter() ç»“æŸæ—¶ï¼Œåˆä¼šå°†è¿™ä¸ª Watcher ä»æ ˆä¸­å¼¹å‡ºï¼Œå°† Dep.target çš„æŒ‡å‘ä¿®æ”¹ä¸ºä¸Šä¸€ä¸ª Watcherã€‚\nconst targetStack = [] export function pushTarget(target) { targetStack.push(target) Dep.target = target } export function popTarget() { targetStack.pop() Dep.target = targetStack[targetStack.length - 1] } è€Œ Watcher çš„ addDep æ–¹æ³•ï¼Œå’Œ Dep ä¸­çš„ addSub æ–¹æ³•äº’ç›¸è°ƒç”¨ï¼ŒåšåŒå‘ä¾èµ–æ”¶é›†çš„å¤„ç†ï¼Œä¸ç”¨æ‹…å¿ƒæ­»å¾ªç¯çš„é—®é¢˜ï¼Œå› ä¸º Watcher è¿˜æœ‰ä¸€ä¸ª cleanupDeps æ¥åŠæ—¶çš„æ¸…ç†ä¾èµ–ã€‚\nupdate() å’Œ dep() åˆ™è´Ÿè´£æ›´æ–°å¤„ç†ï¼Œå½“æ•°æ®å˜åŒ–æ—¶æ‰§è¡Œç›¸åº”çš„æ“ä½œã€‚å…ˆçœ‹ update()ï¼Œåœ¨æ•°æ®å˜åŒ–æ—¶ï¼Œå®ƒæœ‰ä¸‰ç§å¤„ç†æ–¹å¼ï¼š\nlazy æ¨¡å¼\nif(this.lazy) { this.dirty = true } åœ¨æºç ä¸­æœç´¢ dirty å¯ä»¥æ‰¾åˆ° evaluate() æ–¹æ³•ï¼š\n/** * Evaluate the value of the watcher. * This only gets called for lazy watchers. */ evaluate() { this.value = this.get() this.dirty = false } å½“ evaluate() è¢«è°ƒç”¨æ—¶ï¼Œä¼šè°ƒç”¨ get() æ–¹æ³•ï¼Œå¹¶å°† dirty è®¾ä¸º falseã€‚é‚£ä¹ˆ evaluate() åˆåœ¨å“ªé‡Œè¢«ä½¿ç”¨å‘¢ï¼Ÿ å…¨å±€æœç´ åï¼Œèƒ½çœ‹åˆ°åœ¨ state.ts æ–‡ä»¶ä¸­è¢«è°ƒç”¨ï¼š\nfunction createComputedGetter(key) { return function computedGetter() { const watcher = this._computedWatchers \u0026\u0026 this._computedWatchers[key] if (watcher) { if (watcher.dirty) { watcher.evaluate() } if (Dep.target) { // ... watcher.depend() } return watcher.value } } } ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ computed çš„ getter() è¢«è°ƒç”¨æ—¶ï¼Œå¦‚æœè¿™ä¸ª watcher æ˜¯è„æ•°æ®(dirty ä¸º true)ï¼Œé‚£ä¹ˆå°±ä¼šæ‰§è¡Œ evaluate()ï¼Œä½¿ç”¨ lazy æ¨¡å¼ä¸ä¼šç«‹å³é‡æ–°è®¡ç®—å€¼ï¼Œåªæ˜¯å°† dirty æ ‡è®°ä¸º trueï¼Œç­‰åˆ°ä¸‹æ¬¡è®¿é—®è¿™ä¸ªå±æ€§æ—¶æ‰ä¼šçœŸæ­£è®¡ç®—ã€‚ è®¡ç®—å±æ€§ computed å°±æ˜¯é‡‡ç”¨è¿™ä¸ªæ¨¡å¼ã€‚\nsync æ¨¡å¼\nelse if(this.sync) { this.run() } å¦‚æœæ˜¯ sync æ¨¡å¼ï¼Œä¼šè°ƒç”¨ run()ï¼š\nrun() { const value = this.get() // è·å–æ–°çš„å€¼ if(value !== this.value || isObject(value) || this.deep) { // å¦‚æœæ–°æ—§å€¼ä¸ç›¸ç­‰ | æ–°å€¼æ˜¯å¯¹è±¡ | æ·±åº¦ç›‘å¬ const oldValue = this.value // ä¿å­˜æ—§å€¼ this.value = value // è®¾ç½®æ–°å€¼ this.cb.call(this.vm, value, oldValue) // æ‰§è¡Œå›è°ƒå‡½æ•°ï¼Œå¹¶ä¼ å…¥æ–°å€¼å’Œæ—§å€¼ } } èƒ½å¤Ÿçœ‹åˆ°ï¼Œrun æ–¹æ³•ä¼šç«‹å³æ‰§è¡Œ get()ï¼Œå¹¶ä¸”å¦‚æœæ–°æ—§å€¼ä¸ç›¸ç­‰æˆ–æ–°å€¼æ˜¯å¯¹è±¡æˆ–æ·±åº¦ç›‘å¬çš„æ—¶å€™ï¼Œä¼šæ‰§è¡Œå›è°ƒå‡½æ•°ï¼Œå¹¶ä¼ å…¥æ–°å€¼å’Œæ—§å€¼ã€‚ æ‰€ä»¥ sync æ¨¡å¼ä¸»è¦æ˜¯ç”¨äºéœ€è¦ç«‹å³å“åº”æ•°æ®å˜åŒ–çš„åœºæ™¯ï¼Œä¸è¿‡ sync é»˜è®¤æ˜¯ falseï¼Œå¤§å¤šæ•°æƒ…å†µéƒ½ä¼šä½¿ç”¨ async å¼‚æ­¥æ›´æ–°ã€‚\nqueue å¼‚æ­¥æ›´æ–°\nelse { queueWatcher(this) } çœ‹ä¸‹ queueWatcher() åšäº†äº›ä»€ä¹ˆï¼š\nlet has = {} /** * Push a watcher into the watcher queue. * Jobs with duplicate IDs will be skipped unless it's * pushed when the queue is being flushed. */ export function queueWatcher(watcher: Watcher) { // é‡å¤æ£€æŸ¥ï¼Œé˜²æ­¢åŒä¸€ä¸ª watcher è¢«é‡å¤æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­ const id = watcher.id if (has[id] != null) { return } // é˜²æ­¢ watcher åœ¨è‡ªå·±çš„æ›´æ–°è¿‡ç¨‹ä¸­è§¦å‘è‡ªå·±çš„é€’å½’æ›´æ–° if (watcher === Dep.target \u0026\u0026 watcher.noRecurse) { return } has[id] = true if (!flushing) { // å¦‚æœé˜Ÿåˆ—è¿˜æ²¡æœ‰å¼€å§‹åˆ·æ–°ï¼Œæ¨å…¥é˜Ÿåˆ— queue.push(watcher) } else { // å¦‚æœé˜Ÿåˆ—æ­£åœ¨åˆ·æ–°ï¼Œéœ€è¦æŒ‰ç…§ id é¡ºåºæ’å…¥ // ç¡®ä¿ watcher æŒ‰ç…§åˆ›å»ºé¡ºåº(idå¤§å°)æ‰§è¡Œï¼Œå› ä¸ºï¼š1.çˆ¶ç»„ä»¶çš„ watcher è¦åœ¨å­ç»„ä»¶ä¹‹å‰æ›´æ–° 2.computed è¦åœ¨æ™®é€š watcher ä¹‹å‰æ›´æ–° let i = queue.length - 1 while (i \u003e index \u0026\u0026 queue[i].id \u003e watcher.id) { i-- } queue.splice(i + 1, 0, watcher) } // queue the flush if (!waiting) { waiting = true // ç¡®ä¿é˜Ÿåˆ—ä¼šåœ¨ä¸‹ä¸€ä¸ª tick è¢«åˆ·æ–°ï¼Œ nextTick(flushSchedulerQueue) } } å½“ flushSchedulerQueue è¢«æ‰§è¡Œæ—¶ï¼Œflushing ä¼šè¢«è®¾ç½®ä¸º trueã€‚ é€šè¿‡ nextTick() è°ƒç”¨ flushSchedulerQueue()ï¼Œåœ¨ä¸‹ä¸€ä¸ªå¾®ä»»åŠ¡ä¸­æ‰§è¡Œ flushSchedulerQueue()ï¼Œè¿™æ ·å¤šæ¬¡ä¿®æ”¹æ•°æ®ï¼Œåªä¼šè§¦å‘ä¸€æ¬¡æ›´æ–°ã€‚ Vue å“åº”å¼ç³»ç»Ÿ é€šè¿‡ä¸Šé¢çš„ç« èŠ‚æˆ‘ä»¬çŸ¥é“ï¼ŒVue çš„å“åº”å¼ç³»ç»Ÿçš„å®ç°ï¼Œé çš„æ˜¯æ•°æ®å“åº”å¼åŒ–ä»¥åŠä¾èµ–æ”¶é›†ã€‚æ•°æ®å“åº”å¼åŒ–çš„æ ¸å¿ƒ/åŸç†æ˜¯ Object.definePropertyï¼Œå®ƒä¼šæ³¨å†Œ get å’Œ set è¿›è¡Œä¾èµ–æ”¶é›†ï¼Œå…·ä½“æ˜¯åœ¨å“åº”å¼å¯¹è±¡ä¸­ new ä¸€ä¸ª Dep å®ä¾‹æ¥è¿›è¡Œä¾èµ–æ”¶é›†çš„å¤„ç†ï¼Œå°†å½“å‰çš„ Watcher æ·»åŠ åˆ° Dep å®ä¾‹çš„è®¢é˜…è€…åˆ—è¡¨(subs)ä¸­ã€‚é‚£ä¹ˆå…¶å®åˆ°è¿™é‡Œï¼Œå¯¹äºæ•´ä¸ªå“åº”å¼ç³»ç»Ÿæ„å»ºçš„æµç¨‹è¿˜æ˜¯æœ‰ä¸€äº›æ¨¡ç³Šçš„ï¼Œå°¤å…¶æ˜¯ new Watcher()çš„æ—¶æœºï¼Œæ‰€ä»¥å½“æ–°å»ºä¸€ä¸ª Vue å®ä¾‹æ—¶ï¼Œä¸Šé¢æ‰€è¿°çš„è¿™äº›å¤„ç†éƒ½æ˜¯ä½•æ—¶è¿›è¡Œçš„å‘¢ï¼Ÿ\né¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“ Vue å®ä¾‹ä¸­æœ‰å“ªäº› Watcherã€‚ä½œä¸º Vue ç”¨æˆ·ç»å¸¸èƒ½å¤Ÿæ¥è§¦åˆ°çš„æ— éå°±æ˜¯æ¸²æŸ“ Watcher(Render Watcher)ã€è®¡ç®—å±æ€§ Watcher(Computed Watcher)å’Œç”¨æˆ· Watcher(User Watcher)ï¼š\n// æ¨¡æ¿æ¸²æŸ“ Render Watcher \u003cdiv\u003e{{ message }}\u003c/div\u003e // computed é€‰é¡¹ï¼ŒComputed Watcher computed: { total() { return this.price * this.quantity } } // watch é€‰é¡¹ï¼ŒUser Watcher watch: { price(newVal, oldVal) { console.log('price change:', newVal) } } ç°åœ¨æˆ‘ä»¬ä¸ç€æ€¥å…³æ³¨ä½•æ—¶ new Watcherï¼Œå…ˆäº†è§£ä¸‹ new Vue() çš„æ•´ä½“æµç¨‹:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 function initMixin(Vue) { Vue.prototype._init = function () { const vm = this // åˆå§‹åŒ–ç”Ÿå‘½å‘¨æœŸ initLifeCycle(vm) // åˆå§‹åŒ–äº‹ä»¶ initEvent(vm) // åˆå§‹åŒ–æ¸²æŸ“ initRender(vm) // è°ƒç”¨ beforeCreate Hook callHook(vm, 'beforeCreate') // åˆå§‹åŒ– inject initInject(vm) // åˆå§‹åŒ– state initState(vm) // åˆå§‹åŒ– provide initProvide(vm) // è°ƒç”¨ created Hook callHook(vm, 'created') // å¦‚æœæœ‰ el é€‰é¡¹ï¼Œè‡ªåŠ¨æŒ‚è½½ if(vm.$options.el) { vm.$mount(vm.$options.el) // åˆ›å»º Render Watcher } } } æˆ‘ä»¬ä¸»è¦å…³æ³¨ initState å’Œ $mountã€‚\ninitState initState ä¼šä¾æ¬¡åˆå§‹åŒ– props -\u003e methods -\u003e data -\u003e computed -\u003e watchï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 function initState(vm) { const opts = vm.$options // 1. åˆå§‹åŒ– props if (opts.props) initProps(vm, opts.props) // 2. åˆå§‹åŒ– methods if (opts.methods) initMethods(vm, opts.methods) // 3. åˆå§‹åŒ– data if (opts.data) { initData(vm) // ç”Ÿæˆå“åº”å¼å¯¹è±¡ } // 4. åˆå§‹åŒ– computed if (opts.computed) initComputed(vm, opts.computed) // 5. åˆå§‹åŒ– watch if (opts.watch \u0026\u0026 opts.watch !== nativeWatch) { initWatch(vm, opts.watch) } } ç”Ÿæˆå“åº”å¼å¯¹è±¡çš„è¿‡ç¨‹ï¼Œä¹Ÿå°±æ˜¯å‰é¢æåˆ°çš„ Object.definePropertyï¼Œå°±æ˜¯åœ¨ initData ä¸­å®ç°ï¼š\nfunction initData() { observe(data) // ä¸Šæ–‡ä¸­æåˆ°çš„ç”Ÿæˆå“åº”å¼å¯¹è±¡å…¥å£å‡½æ•° } initComputed å’Œ initWatch åˆ†åˆ«åˆ›å»º Computed Watcher å’Œ User Watcherï¼š\nfunction initComputed() { // ä¸ºæ¯ä¸ªè®¡ç®—å±æ€§åˆ›å»º computed watcher new Watcher(vm, getter, null, options) } function initWatch() { // ä¸ºæ¯ä¸ª watch åˆ›å»º user watcher new Watcher(vm, key, cb, options) } $mount Render Watcher ä¼šåœ¨ç»„ä»¶æŒ‚è½½æ—¶($mount)åˆ›å»ºã€‚\n// åˆ›å»ºæ¸²æŸ“ watcher (mount é˜¶æ®µ) Vue.prototype.$mount = new Watcher(vm, updateComponent, null, options) ","vue2-å“åº”å¼ç³»ç»Ÿçš„ç¼ºé™·#Vue2 å“åº”å¼ç³»ç»Ÿçš„ç¼ºé™·":"Vue2 çš„å“åº”å¼å¹¶ä¸æ˜¯å®Œç¾çš„ï¼ŒObject.defineProperty è¿™ç§å®ç°æ–¹å¼è‡ªå¸¦ä¸€äº›ç¼ºé™·ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨ Vue2 æ—¶éœ€è¦æ³¨æ„è¿™äº›é—®é¢˜ã€‚\nå¯¹è±¡ Vue2 æ— æ³•æ£€æµ‹å¯¹è±¡å±æ€§çš„æ·»åŠ å’Œåˆ é™¤ã€‚\nä¾‹å¦‚ï¼š\nvar vm = new Vue({ data: { a: 1 } }) // vm.a æ˜¯å“åº”å¼çš„ vm.b = 2 // vm.b æ˜¯éå“åº”å¼çš„ å› ä¸º Vue ä¼šåœ¨åˆå§‹åŒ–å®ä¾‹æ—¶å¯¹ property æ‰§è¡Œ getter/setter è½¬åŒ–ï¼Œæ‰€ä»¥ property å¿…é¡»åœ¨ data å¯¹è±¡ä¸Šå­˜åœ¨æ‰èƒ½è®© Vue å°†å®ƒè½¬ä¸ºå“åº”å¼çš„ã€‚\nfunction initData(vm) { let data = vm.$options.data observe(data) // åœ¨è¿™é‡Œè°ƒç”¨ observe, ä½¿å¯¹è±¡å“åº”å¼åŒ– } è§£å†³æ–¹æ¡ˆ1 Vue.set å¯¹äºå·²ç»åˆ›å»ºçš„å®ä¾‹ï¼Œè™½ç„¶ Vue ä¸å…è®¸åŠ¨æ€æ·»åŠ æ ¹çº§åˆ«çš„å“åº”å¼ propertyã€‚ä½†æ˜¯å¯ä»¥ä½¿ç”¨ Vue.set(object, propertyName, value) çš„æ–¹æ³•å‘åµŒå¥—å¯¹è±¡æ·»åŠ å“åº”å¼ propertyã€‚\nä¾‹å¦‚åœ¨ data ä¸­æœ‰è¿™ä¹ˆä¸€ä¸ªå¯¹è±¡ï¼š\nvar vm = new Vue({ data: { someObject: { a: 1, } } }) ä½¿ç”¨ Vue.set ç»™ someObject æ–°å¢é”®åä¸º b çš„å“åº”å¼ propertyï¼š\nVue.set(vm.someObject, 'b', 2) æˆ–\nthis.$set(this.someObject, 'b', 2) è§£å†³æ–¹æ¡ˆ2 Object.assign æœ‰æ—¶éœ€è¦ä¸ºå·²å­˜åœ¨çš„å¯¹è±¡èµ‹å€¼å¤šä¸ªæ–° propertyï¼Œå¯ä»¥ä½¿ç”¨ Object.assignã€‚\nthis.someObject = Object.assign({}, this.someObject, {a: 1, b: 2}) ä½†è¦æ³¨æ„ï¼Œåƒä¸‹é¢è¿™æ ·æ–°å¢çš„ propertyï¼Œæ˜¯æ²¡æœ‰å“åº”å¼çš„ï¼š\nObject.assign(this.someObject, {a: 1, b: 2}) åŸå› å¾ˆç®€å•ï¼ŒObject.assign(this.someObject,{a:1,b:2}) è¿™ç§å†™æ³•ç›¸å½“äºç›´æ¥ä¿®æ”¹ã€æ·»åŠ å±æ€§ï¼š\n// ç­‰åŒäº this.someObject.a = 1 // è§¦å‘ a çš„ setter this.someObject.b = 2 // b ä»ä¸ºéå“åº”å¼ è€Œ Object.assign({},this.someObject,{a:1,b:2}) è¿™ç§å†™æ³•å¯ä»¥è§¦å‘ someObject çš„ setterï¼Œä¼šé€’å½’éå† someObject ä¸Šçš„æ‰€æœ‰å±æ€§ï¼Œè¿›è¡Œå“åº”å¼è½¬æ¢ã€‚\næ•°ç»„ Vue2 æ— æ³•æ£€æµ‹æ•°ç»„ç´¢å¼•å’Œé•¿åº¦å˜åŒ–ã€‚\næ•°ç»„ç´¢å¼•ï¼švm.items[indexOfItem] = newValue æ•°ç»„é•¿åº¦ï¼švm.items.length = newLength ä»¥ä¸Šä¸¤ç§å˜åŒ–æ— æ³•è§¦å‘å“åº”å¼æ›´æ–°ï¼Œå› ä¸ºæ•°ç»„çš„ç´¢å¼•å®é™…ä¸Šå°±æ˜¯å¯¹è±¡çš„å±æ€§ï¼Œè™½ç„¶ç†è®ºä¸Š Vue å¯ä»¥åƒå¤„ç†å¯¹è±¡å±æ€§ä¸€æ ·å¤„ç†æ•°ç»„ç´¢å¼•ï¼Œä½†æ˜¯æ•°ç»„è¿‡é•¿æ—¶ï¼Œæ¯”å¦‚ä¸€ä¸ª10000é•¿åº¦çš„æ•°ç»„ï¼Œå¦‚æ¯ä¸ªç´¢å¼•éƒ½è®¾ç½® getter/setterï¼Œä¼šæœ‰ä¸¥é‡çš„æ€§èƒ½é—®é¢˜ã€‚åŒæ ·çš„ï¼Œæ•°ç»„çš„ length å±æ€§ä¹Ÿæ²¡æœ‰åšå“åº”å¼å¤„ç†ï¼Œå› ä¸ºå¯èƒ½ä¼šå¼•å‘è¿é”ååº”ï¼ˆä¿®æ”¹ length å¯èƒ½ä¼šå½±å“å¤§é‡ç´ ï¼‰ã€‚\nVue2 ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œé‡å†™äº†æ•°ç»„çš„ä¸ƒä¸ªæ–¹æ³•ï¼Œè¿™ä¸ƒä¸ªæ–¹æ³•å¯ä»¥è§¦å‘å“åº”å¼æ›´æ–°ï¼š\npush() pop() shift() unshift() splice() sort() reverse() æ‰€ä»¥æƒ³è¦è§¦å‘æ•°ç»„çš„å“åº”å¼ï¼Œåº”è¯¥è¿™æ ·åšï¼š\n// ä¿®æ”¹æ•°ç»„ç´¢å¼• vm.items.splice(indexOfItem, 1, newValue) // ä¿®æ”¹æ•°ç»„é•¿åº¦ vm.items.splice(2) æ€§èƒ½ Vue2 çš„å“åº”å¼å®ç°éœ€è¦é€’å½’éå†å¯¹è±¡çš„æ‰€æœ‰å±æ€§ï¼Œæœ¬èº«æ€§èƒ½å¼€é”€å°±æ¯”è¾ƒå¤§ï¼Œè¿™ä¹Ÿæ˜¯ Vue3 æ”¹ä¸ºé€šè¿‡ proxy æ¥å®ç°å“åº”å¼çš„åŸå› ã€‚","vue3-é’ˆå¯¹å“åº”å¼åšçš„æ”¹è¿›#Vue3 é’ˆå¯¹å“åº”å¼åšçš„æ”¹è¿›":"proxy å®ç°å“åº”å¼ Vue3 çš„å“åº”å¼ç³»ç»ŸåŸºäº ES6 çš„ proxyï¼Œæ˜¯å¯¹äº Vue2 ä¸­ Object.defineProperty çš„é‡å¤§å‡çº§ï¼Œä¼˜ç‚¹æœ‰ï¼š\nå¯ä»¥æ£€æµ‹å¯¹è±¡å±æ€§çš„æ·»åŠ å’Œåˆ é™¤ å¯ä»¥ç›‘å¬æ•°ç»„å˜åŒ–è€Œæ— éœ€é¢å¤–å¤„ç† ä¸éœ€è¦æ·±åº¦é€’å½’éå†ï¼Œæ€§èƒ½æ›´å¥½ æ”¯æŒ Mapã€Set ç­‰æ•°æ®ç»“æ„ function reactive(target) { return new Proxy(target, { get(target, key, receiver) { const res = Reflect.get(target, key, receiver) track(target, key) // ä¾èµ–æ”¶é›† return res }, set(target, key, value, receiver) { const res = Reflect.set(target, key, value, receiver) trigger(target, key) // è§¦å‘æ›´æ–° return res } }) } è¿™é‡Œçš„ Reflect æ˜¯ä¸€ä¸ªå†…ç½®å¯¹è±¡ï¼Œæä¾›æ‹¦æˆª JavaScript æ“ä½œçš„æ–¹æ³•ã€‚\nReflect.get(target, key) // è·å–å±æ€§ Reflect.set(target, key, value) // è®¾ç½®å±æ€§ Reflect.has(target, key) // æ£€æŸ¥å±æ€§ Reflect.deleteProperty(target, key) // åˆ é™¤å±æ€§ Reflect æ˜¯æä¾›ç»Ÿä¸€çš„æ“ä½œå¯¹è±¡ APIï¼Œä¸º proxy æä¾›ä¾¿åˆ©ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 function reactive(target) { return new Proxy(target, { get(target, key, receiver) { // ä½¿ç”¨ Reflect å¯ä»¥ç¡®ä¿ this çš„æ­£ç¡®æŒ‡å‘ const res = Reflect.get(target, key, receiver) track(target, key) return res }, set(target, key, value, receiver) { // è¿”å›å¸ƒå°”å€¼åˆ¤æ–­æ“ä½œæ˜¯å¦æˆåŠŸ const res = Reflect.set(target, key, value, receiver) trigger(target, key) return res } }) } æ–°å¢å“åº”å¼ API ref å’Œ reactive ref å’Œ reactive éƒ½æ˜¯ Vue3 æ–°å¢çš„å“åº”å¼ APIï¼Œå¯ä»¥ç”¨æ¥å¤„ç†å“åº”å¼æ•°æ®ï¼ŒäºŒè€…åœ¨ä½¿ç”¨ä¸Šæœ‰äº›ä¸åŒï¼š\nç‰¹æ€§ ref reactive è®¿é—®æ–¹å¼ .value è®¿é—® ç›´æ¥è®¿é—® è‡ªåŠ¨è§£åŒ… åœ¨ \u003ctemplate\u003e å’Œ reactive ä¸­è‡ªåŠ¨è§£åŒ… ä¸éœ€è¦è§£åŒ… æ•°æ®ç±»å‹æ”¯æŒ æ”¯æŒæ‰€æœ‰æ•°æ®ç±»å‹ ä»…æ”¯æŒå¯¹è±¡ç±»å‹ è§£æ„è¡Œä¸º è§£æ„åå¤±å»å“åº”å¼ï¼Œéœ€è¦ç”¨ toRef / toRefs è§£æ„åå¤±å»å“åº”å¼ï¼Œéœ€è¦ç”¨ toRef / toRefs èµ‹å€¼ç‰¹ç‚¹ å¯ä»¥ç›´æ¥æ›¿æ¢æ•´ä¸ªå€¼ ref.value = newValue ä¸èƒ½ç›´æ¥æ›¿æ¢æ•´ä¸ªå¯¹è±¡ï¼Œåªèƒ½ä¿®æ”¹å±æ€§ åµŒå¥—æ•°æ® å†…éƒ¨è‡ªåŠ¨è°ƒç”¨ reactive å¤„ç†å¯¹è±¡ æ·±å±‚å“åº”å¼è½¬æ¢ ä½¿ç”¨åœºæ™¯ åŸºæœ¬æ•°æ®ç±»å‹ / å•ä¸€æ•°æ®æº / ç»„åˆå‡½æ•°è¿”å›å€¼ / éœ€è¦é‡æ–°èµ‹å€¼çš„æ•°æ® æœ‰å…³è”çš„æ•°æ®é›†åˆ / å¼•ç”¨æ•°æ®ç±»å‹ / ä¸éœ€è¦é‡æ–°èµ‹å€¼çš„æ•°æ® è®¿é—®æ–¹å¼ ref å¯¹è±¡é€šè¿‡ .value è®¿é—®ï¼Œreactive ç›´æ¥è®¿é—®ã€‚\nconst count = ref(0) console.log(count.value) // éœ€è¦ .value è®¿é—® const obj = reactive({ count: 0 }) console.log(obj.count) // ç›´æ¥è®¿é—®ï¼Œæ— éœ€ .value è‡ªåŠ¨è§£åŒ… ref å¯¹è±¡åœ¨ templateã€reactive ä¸­è‡ªåŠ¨è§£åŒ…\n\u003ctemplate\u003e \u003cdiv\u003e \u003c!-- å·²è‡ªåŠ¨è§£åŒ…ï¼Œç›´æ¥è®¿é—®ï¼Œæ— éœ€ .value ---\u003e {{ count }} \u003c/div\u003e \u003c/template\u003e \u003cscript setup\u003e const count = ref(0) // åœ¨ reactive å¯¹è±¡ä¸­ ref ä¼šè‡ªåŠ¨è§£åŒ… const state = reactive({ count, // è‡ªåŠ¨è§£åŒ… double: computed(() =\u003e state.count*2), }) \u003c/script\u003e æ•°æ®ç±»å‹æ”¯æŒ // ref æ”¯æŒæ‰€æœ‰æ•°æ®ç±»å‹ const num = ref(0) const str = ref('XD') const boo = ref(true) const obj = ref({a:1, b:2}) const arr = ref([1,2]) // reactive åªæ”¯æŒå¼•ç”¨æ•°æ®ç±»å‹(å¯¹è±¡/æ•°ç»„) const obj2 = reactive({a:1, b:2}) const arr2 = reactive([1,2]) ä½¿ç”¨ toRef / toRefs è§£æ„ const obj = reactive({name: 'River', age: 18}) const { age } = obj // ç›´æ¥è§£æ„ä¼šå¤±å»å“åº”å¼ // ä½¿ç”¨ toRef const age = toRef(obj, 'age') // æˆ–è€… toRefs const { name, age } = toRefs(obj) // è¿™æ ·åšçš„å¥½å¤„æ˜¯å¯ä»¥ä½¿å¯¹è±¡ä¿æŒå“åº”å¼ // ä¿®æ”¹ ref ä¼šæ›´æ–°æºå¯¹è±¡ age.value++ console.log(obj.age) // 19 // ä¿®æ”¹æºå¯¹è±¡ä¼šæ›´æ–° ref obj.age++ console.log(age.value) // 20 èµ‹å€¼ç‰¹ç‚¹ ref å¯¹è±¡å¯ä»¥ç›´æ¥æ›¿æ¢ï¼Œreactive ä¸å¯ç›´æ¥æ›¿æ¢ï¼Œåªèƒ½ä¿®æ”¹å±æ€§\nconst foo = ref([1,2]) foo.value = [3,4] // å¯ä»¥ const foo = reactive([1,2]) foo = [3,4] // ä¸è¡Œ åµŒå¥—æ•°æ® ref å¤„ç†åµŒå¥—æ•°æ®\nconst user = ref({ name: 'Zhang', profile: { age: 25, address: { city: 'Beijing' } } }) // ref å†…éƒ¨ä¼šç”¨ reactive æ·±å±‚è½¬æ¢å¯¹è±¡ user.value.profile.age = 26 // è§¦å‘å“åº”å¼æ›´æ–° user.value.profile.address.city = 'Shanghai' // è§¦å‘å“åº”å¼æ›´æ–° reactive å¤„ç†åµŒå¥—æ•°æ®\nconst user = reactive({ name: 'Zhang', profile: { age: 25, address: { city: 'Beijing' } } }) // reactive ä¼šæ·±å±‚è½¬æ¢æ‰€æœ‰åµŒå¥—å¯¹è±¡ user.profile.age = 26 // è§¦å‘å“åº”å¼æ›´æ–° user.profile.address.city = 'Shanghai' // è§¦å‘å“åº”å¼æ›´æ–° ä½¿ç”¨åœºæ™¯ ç»„åˆæ˜¯å‡½æ•°çš„è¿”å›å€¼ä½¿ç”¨ ref æ›´ä½³ï¼Œå¦‚éœ€ reactiveï¼Œè¦é€šè¿‡ toRefs æ¥ç»´æŒæ•°æ®å“åº”å¼\nfunction useCount() { const count = ref(0) return count } function useUser() { const state = reactive({name: 'River', age: 18}) return toRefs(state) } watchEffect watchEffect è‡ªåŠ¨è·Ÿè¸ªå“åº”å¼ä¾èµ–ï¼Œå¹¶åœ¨å“åº”å¼ä¾èµ–æ›´æ–°æ—¶é‡æ–°è¿è¡Œå‰¯ä½œç”¨å‡½æ•°ã€‚ç®€å•æ¥è¯´ï¼Œå®ƒä¼šåšè¿™äº›äº‹æƒ…ï¼š\nç«‹å³æ‰§è¡Œä¸€æ¬¡å›è°ƒå‡½æ•° è‡ªåŠ¨è·Ÿè¸ªå›è°ƒå‡½æ•°å†…ä½¿ç”¨çš„å“åº”å¼ä¾èµ– åœ¨ä¾èµ–å˜åŒ–æ—¶ï¼Œé‡æ–°æ‰§è¡Œå›è°ƒå‡½æ•° åŸºç¡€ç”¨æ³• import { ref, watchEffect } from 'vue' const count = ref(0) const message = ref('Hello') watchEffect(() =\u003e { console.log(`Count: ${count.value}, Message: ${message.value}`) }) // ä¿®æ”¹ä»»ä½•ä¾èµ–éƒ½ä¼šè§¦å‘å›è°ƒ count.value++ // è¾“å‡ºï¼šCount: 1, Message: Hello message.value = 'Hi' // è¾“å‡ºï¼šCount: 1, Message: Hi æš‚åœ/æ¢å¤/åœæ­¢ ç›‘å¬ watchEffect è¿˜ä¼šè¿”å›ä¸€ä¸ªåœæ­¢å‡½æ•°ï¼Œæ‰§è¡Œå®ƒå°±ä¼šåœæ­¢ç›‘å¬\nconst stop = watchEffect(() =\u003e {}) // å½“ä¸å†éœ€è¦ç›‘å¬æ—¶ stop() å½“éœ€è¦æš‚åœ/æ¢å¤çš„æ—¶å€™\nconst { stop, pause, resume } = watchEffect(() =\u003e {}) // æš‚åœ pause() // æ¢å¤ resume() // åœæ­¢ stop() æ¸…ç†å‰¯ä½œç”¨ ä¸ºä»€ä¹ˆè¦æ¸…ç†å‰¯ä½œç”¨ï¼š\né˜²æ­¢å†…å­˜æ³„æ¼ï¼ˆæ¯”å¦‚å®šæ—¶å™¨ï¼‰ é¿å…äº‹ä»¶é‡å¤ç›‘å¬ å–æ¶ˆä¸éœ€è¦çš„ç½‘ç»œè¯·æ±‚ æ¸…ç†å¯èƒ½äº§ç”Ÿå†²çªçš„æ—§çŠ¶æ€ watchEffect å›è°ƒå‡½æ•°ä¸­çš„ onCleanup è¿™ä¸ªå…¥å‚å°±æ˜¯ç”¨æ¥æ¸…ç†å‰¯ä½œç”¨çš„ï¼Œå®ƒçš„æ‰§è¡Œæ—¶æœºæœ‰ï¼š\nwatchEffect å³å°†é‡æ–°æ‰§è¡Œæ—¶ watchEffect è¢«åœæ­¢æ—¶ æˆ‘ä»¬æ‹¿ä¸€ä¸ªç½‘ç»œè¯·æ±‚ä¸¾ä¾‹ï¼Œåˆ›å»ºäº†ä¸€ä¸ªç½‘ç»œè¯·æ±‚çš„æ§åˆ¶å™¨ controllerï¼Œå¹¶ä¸”åœ¨ onCleanup å‡½æ•°ä¸­è°ƒç”¨äº†å–æ¶ˆç½‘ç»œè¯·æ±‚çš„æ–¹æ³•ã€‚\nconst userId = ref('1') const userData = ref(null) watchEffect((onCleanup) =\u003e { // åˆ›å»ºä¸€ä¸ªå–æ¶ˆæ§åˆ¶å™¨ const controller = new AbortController() // ç½‘ç»œè¯·æ±‚ fetch(`/api/user/${userId.value}`, { signal: controller.signal, }).then(data =\u003e userData.value = JSON.parse(data)) // æ¸…ç†å‡½æ•°ï¼šå¦‚æœ userId æ”¹å˜ï¼Œåˆ™å–æ¶ˆä¹‹å‰çš„è¯·æ±‚ onCleanup(() =\u003e { controller.abort() }) }) setTimeout(() =\u003e { userId.value = '2' }, 100) æ‰§è¡Œé¡ºåºæ˜¯è¿™æ ·çš„ï¼š\nMarkdownåˆå§‹æ‰§è¡Œï¼š 1. å¼€å§‹è¯·æ±‚ï¼ŒuserId: 1 100 msåä¿®æ”¹ userIdï¼š 2. æ‰§è¡Œæ¸…ç†ï¼Œå–æ¶ˆä¹‹å‰çš„ç½‘ç»œè¯·æ±‚ (æ¸…ç†ä¹‹å‰çš„å‰¯ä½œç”¨`onCleanup`) 3. è¯·æ±‚è¢«å–æ¶ˆ (ä¹‹å‰çš„è¯·æ±‚è¢« `abort`) 4. å¼€å§‹è¯·æ±‚ï¼ŒuserId: 2 (é‡æ–°æ‰§è¡Œ `watchEffect`) 3.5+ åçš„å‰¯ä½œç”¨æ¸…ç†\nimport { onWatcherCleanup } from 'vue' // ... watchEffect(() =\u003e { // ... onWatcherCleanup(() =\u003e { controller.abort() }) // ... }) // ... æ‰§è¡Œæ—¶æœº watchEffect è¿˜æä¾›ç¬¬äºŒä¸ªå‚æ•°ï¼Œå¯ä»¥ç”¨æ¥æ§åˆ¶å‰¯ä½œç”¨å‡½æ•°çš„æ‰§è¡Œæ—¶æœºã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 // é»˜è®¤ï¼šç»„ä»¶æ›´æ–°å‰æ‰§è¡Œ, flush: 'pre' watchEffect(() =\u003e {}) // ç»„ä»¶æ›´æ–°åæ‰§è¡Œ watchEffect(() =\u003e { // ... }, flush: 'post') // åŒæ­¥æ‰§è¡Œ watchEffect(() =\u003e { // ... }, flush: 'sync') watchEffect å’Œ watch watchEffect è‡ªåŠ¨è¿½è¸ªä¾èµ–ï¼Œwatch éœ€è¦æ˜ç¡®æŒ‡å®šç›‘å¬çš„æº watchEffect(() =\u003e console.log(count.value)) // è‡ªåŠ¨è¿½è¸ªä¾èµ– watch(count, newVal =\u003e console.log(count.value)) // æ˜ç¡®æ‰§è¡Œä¾èµ– watchEffect é»˜è®¤ç«‹å³æ‰§è¡Œï¼Œwatch éœ€è¦è®¾ç½® immediate: true watchEffect(() =\u003e {}) // é»˜è®¤ç«‹å³æ‰§è¡Œ watch(source, () =\u003e {}, { immediate: true }) // é»˜è®¤ä¸ä¼šç«‹å³æ‰§è¡Œï¼Œéœ€è®¾ç½® immediate ä¸º true "},"title":"Vue å“åº”å¼æºç åˆ†æ"}}